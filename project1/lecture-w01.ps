%!PS-Adobe-3.0
%%Creator: groff version 1.19.1
%%CreationDate: Fri Sep  9 00:16:17 2016
%%DocumentNeededResources: font Times-Roman
%%+ font Times-Bold
%%+ font Times-Italic
%%+ font Courier
%%DocumentSuppliedResources: file layers.eps
%%+ file procmodel-mult.eps
%%+ file procmodel-single.eps
%%+ procset grops 1.19 1
%%Pages: 15
%%PageOrder: Ascend
%%DocumentMedia: Default 612 792 0 () ()
%%Orientation: Portrait
%%EndComments
%%BeginDefaults
%%PageMedia: Default
%%EndDefaults
%%BeginProlog
%%BeginResource: procset grops 1.19 1
%!PS-Adobe-3.0 Resource-ProcSet
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}bind def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/Fr{
setrgbcolor fill
}bind def
/setcmykcolor where{
pop
/Fk{
setcmykcolor fill
}bind def
}if
/Fg{
setgray fill
}bind def
/FL/fill load def
/LW/setlinewidth load def
/Cr/setrgbcolor load def
/setcmykcolor where{
pop
/Ck/setcmykcolor load def
}if
/Cg/setgray load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
/setpagedevice{}def
}bind def
/PEND{
clear
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%EndProlog
%%BeginSetup
%%BeginFeature: *PageSize Default
<< /PageSize [ 612 792 ] /ImagingBBox null >> setpagedevice
%%EndFeature
%%IncludeResource: font Times-Roman
%%IncludeResource: font Times-Bold
%%IncludeResource: font Times-Italic
%%IncludeResource: font Courier
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/Euro/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Courier@0 ENC0/Courier RE/Times-Italic@0 ENC0/Times-Italic RE
/Times-Bold@0 ENC0/Times-Bold RE/Times-Roman@0 ENC0/Times-Roman RE
%%EndSetup
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)69.336 60 Q
(Unit 1/pg 1)55.998 E(\2512016 Jef)126.405 E 2.25(fH)-.225 G(akner)-2.25
E/F1 13/Times-Bold@0 SF(What is an operating system?)185.364 120 Q/F2 13
/Times-Roman@0 SF 2.969(The term "operating system" means dif)33.336 156
R 2.968(ferent things to dif)-.325 F 2.968(ferent people.)-.325 F 2.968
(In order to)9.468 F .704(understand the scope and role of an Operating\
 System as it pertains to this course, let us)33.336 171 R 2.876
(brie\215y e)33.336 186 R 2.875(xamine the history of computing.)-.195 F
/F3 13/Times-Italic@0 SF 2.875(The mor)9.375 F 6.125(et)-.481 G 2.875
(hings c)-6.125 F(hang)-.195 E 3.135 -.13(e, t)-.13 H 2.875(he mor).13 F
6.125(et)-.481 G(hings)-6.125 E -.481(re)33.336 201 S 1.084
(main the same).481 F F2 7.584(.T)C 1.084
(he computing industry is the leader in wheel re-in)-7.584 F -.195(ve)
-.52 G 4.334(ntion. Man).195 F 4.334(yo)-.195 G(f)-4.334 E 5.541(the cl\
assic problems in computing, including operating systems design, are "r\
e-)33.336 216 R(disco)33.336 231 Q -.195(ve)-.195 G(red" e).195 E -.195
(ve)-.325 G(ry fe).195 E 3.25(wd)-.325 G(ecades.)-3.25 E 1.413
(The earliest "computers" were really just calculators.)33.336 252 R
(The)7.914 E 4.664(yc)-.195 G 1.414(ould perform a \214x)-4.664 F 1.414
(ed task,)-.195 F 2.026(such as summing a list of numbers, and some cou\
ld be re-programmed in a sense by)33.336 267 R 2.154
(changing the wiring, b)33.336 282 R 2.154(ut the)-.26 F 5.404(yw)-.195
G 2.154(ere not capable of accepting and running an arbitrary)-5.404 F
(softw)33.336 297 Q(are program.)-.13 E -.52(Wi)33.336 318 S .059
(th the introduction during W).52 F .059(orld W)-1.04 F .059(ar II of V)
-1.04 F .059(on Neummann architecture, the concept of)-1.677 F 1.841
(the "computer program" w)33.336 333 R 1.841(as born.)-.13 F 1.842
(The operation of the computing machine could be)8.342 F 5.097
(described as a sequence of primiti)33.336 348 R 5.487 -.195(ve i)-.325
H 5.097(nstructions, or "opcodes", which could be).195 F 2.177
(represented as binary numbers.)33.336 363 R 2.177
(Therefore, it became possible to consider a computer)8.677 F 2.656(pro\
gram as another form of data which could be stored, processed and manip\
ulated.)33.336 378 R .058(Initial entry of a program into memory w)
33.336 393 R .059(as typically in the form of punched paper tape or)-.13
F .27
(card stock media, or through manipulation of front-panel switches.)
33.336 408 R .269(Magnetic media such)6.769 F 1.338(as drums, disks and\
 tapes were later introduced to store and transport lar)33.336 423 R
1.338(ge amounts of)-.234 F(data.)33.336 438 Q 2.703
(During these early days, an)33.336 459 R 5.953(ys)-.195 G 2.703
(ubroutines necessary for the operation of the machine)-5.953 F 2.489
(itself, such as de)33.336 474 R 2.489(vice dri)-.325 F -.195(ve)-.325 G
2.489(rs for I/O de).195 F 2.49
(vices, had to be included with each program.)-.325 F(Ob)33.336 489 Q
3.31(viously this introduced considerable repetiti)-.195 F 3.7 -.195
(ve b)-.325 H 6.56(ulk. So,)-.065 F 3.31(the v)6.56 F 3.309
(ery \214rst "operating)-.195 F 2.784
(systems" were this collection of de)33.336 504 R 2.784(vice dri)-.325 F
-.195(ve)-.325 G 6.034(rs).195 G 2.785
(ubroutines and other commonly used)-6.034 F 4.329(routines that were k)
33.336 519 R 4.329(ept semi-permanently in the machine')-.13 F 7.579(sm)
-.715 G(emory)-7.579 E 10.829(.\()-.845 G F3 4.329(It might be)-10.829 F
(inter)33.336 534 Q .829
(esting to learn that most computer memory of this time period was ma)
-.481 F .829(gnetic "cor)-.13 F(e")-.481 E(arr)33.336 549 Q(ays, whic)
-.195 E 3.25(hh)-.195 G(ad the pr)-3.25 E(operty of r)-.585 E
(etaining their contents with power of)-.481 E -.195(f.)-.234 G F2(\))
6.695 E .692(In this "batch" mode of operation, the OS remained residen\
t while each user')33.336 570 R 3.941(s")-.715 G .691(job" w)-3.941 F
(as)-.13 E .119(loaded into memory)33.336 585 R 3.369(,e)-.845 G -.195
(xe)-3.564 G .12
(cuted, and the output produced, typically on a line printer or card)
.195 F(puncher)33.336 600 Q 7.474(.O)-.715 G .974
(nly one job could be run at an)-7.474 F 4.223(yg)-.195 G -2.795 -.325
(iv e)-4.223 H 4.223(nt).325 G .973
(ime, leading to long queues and poor)-4.223 F(de)33.336 615 Q -.195(ve)
-.325 G .372(lopment c).195 F .372(ycles \(imagine w)-.195 F .373
(aiting 45 minutes to \214nd a syntax error!\).)-.13 F 3.623(Al)6.873 G
.373(ot of a job')-3.623 F(s)-.715 E 2.823(time w)33.336 630 R 2.823
(as spent idly w)-.13 F 2.823(aiting for slo)-.13 F 6.073(wI)-.325 G
2.823(/O operations to complete.)-6.073 F 2.823(The model belo)9.323 F
(w)-.325 E(depicts, schematically)33.336 645 Q 3.25(,s)-.845 G
(uch a simple computer that does one program at a time.)-3.25 E 0 Cg EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 1/pg 2)73.998 E(\2512016 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25
E 0 0 432 765 -295.341 523 51.336 415.341 PBEGIN
%%BeginDocument: procmodel-single.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: procmodel.fig
%%Creator: fig2dev Version 3.2 Patchlevel 4
%%CreationDate: Thu Sep  8 23:19:30 2016
%%For: hak@lex ()
%%BoundingBox: 0 0 765 523
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
newpath 0 523 moveto 0 0 lineto 765 0 lineto 765 523 lineto closepath clip newpath
-71.3 540.7 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y tr xrad yrad sc 0 0 1 startangle endangle arc
	closepath
	savematrix setmatrix
	} def

/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
0 slj 0 slc
 0.06000 0.06000 sc
%
% Fig objects follow
%
% 
% here starts figure with depth 52
% Polyline
7.500 slw
gs  clippath
9315 1230 m 9315 1170 l 9163 1170 l 9283 1200 l 9163 1230 l cp
eoclip
n 4500 1200 m
 9300 1200 l gs col0 s gr gr

% arrowhead
n 9163 1230 m 9283 1200 l 9163 1170 l  col0 s
% here ends figure;
% 
% here starts figure with depth 50
% Ellipse
7.500 slw
n 12900 7350 600 150 0 360 DrawEllipse gs col0 s gr

% Polyline
n 1200 600 m 4500 600 l 4500 4800 l 1200 4800 l
 cp gs col0 s gr 
% Polyline
n 1500 1500 m 2700 1500 l 2700 3600 l 1500 3600 l
 cp gs col0 s gr 
% Polyline
gs  clippath
9315 3930 m 9315 3870 l 9163 3870 l 9283 3900 l 9163 3930 l cp
4485 3870 m 4485 3930 l 4637 3930 l 4517 3900 l 4637 3870 l cp
eoclip
n 4500 3900 m
 9300 3900 l gs col0 s gr gr

% arrowhead
n 4637 3870 m 4517 3900 l 4637 3930 l  col0 s
% arrowhead
n 9163 3930 m 9283 3900 l 9163 3870 l  col0 s
% Polyline
n 9300 600 m 11100 600 l 11100 4500 l 9300 4500 l
 cp gs col0 s gr 
% Polyline
gs  clippath
9315 6030 m 9315 5970 l 9163 5970 l 9283 6000 l 9163 6030 l cp
eoclip
n 8400 1200 m 8400 6000 l
 9300 6000 l gs col0 s gr gr

% arrowhead
n 9163 6030 m 9283 6000 l 9163 5970 l  col0 s
% Polyline
gs  clippath
9315 6930 m 9315 6870 l 9163 6870 l 9283 6900 l 9163 6930 l cp
eoclip
n 8700 3900 m 8700 6900 l
 9300 6900 l gs col0 s gr gr

% arrowhead
n 9163 6930 m 9283 6900 l 9163 6870 l  col0 s
% Polyline
n 9300 5700 m 11100 5700 l 11100 8100 l 9300 8100 l
 cp gs col0 s gr 
% Polyline
gs  clippath
11085 5970 m 11085 6030 l 11237 6030 l 11117 6000 l 11237 5970 l cp
eoclip
n 12600 6000 m
 11100 6000 l gs col0 s gr gr

% arrowhead
n 11237 5970 m 11117 6000 l 11237 6030 l  col0 s
% Polyline
gs  clippath
12615 6630 m 12615 6570 l 12463 6570 l 12583 6600 l 12463 6630 l cp
eoclip
n 11100 6600 m
 12600 6600 l gs col0 s gr gr

% arrowhead
n 12463 6630 m 12583 6600 l 12463 6570 l  col0 s
% Polyline
gs  clippath
12315 7530 m 12315 7470 l 12163 7470 l 12283 7500 l 12163 7530 l cp
11085 7470 m 11085 7530 l 11237 7530 l 11117 7500 l 11237 7470 l cp
eoclip
n 11100 7500 m
 12300 7500 l gs col0 s gr gr

% arrowhead
n 11237 7470 m 11117 7500 l 11237 7530 l  col0 s
% arrowhead
n 12163 7530 m 12283 7500 l 12163 7470 l  col0 s
% Polyline
n 13500 7350 m 13500 9000 l 12300 9000 l
 12300 7350 l gs col0 s gr 
% Polyline
n 9600 900 m 10800 900 l 10800 2100 l 9600 2100 l
 cp gs col0 s gr 
% Polyline
n 9600 2400 m 10800 2400 l 10800 3300 l 9600 3300 l
 cp gs col0 s gr 
% Polyline
n 9600 3450 m 10800 3450 l 10800 4350 l 9600 4350 l
 cp gs col0 s gr 
% Polyline
n 1500 2400 m 2700 2400 l 2700 2700 l 1500 2700 l
 cp gs col0 s gr 
% Polyline
n 3150 1500 m 4350 1500 l 4350 2550 l 3150 2550 l
 cp gs col0 s gr 
% Polyline
n 3150 2700 m 4350 2700 l 4350 3900 l 3150 3900 l
 cp gs col0 s gr 
/Times-Roman ff 200.00 scf sf
2250 1050 m
gs 1 -1 sc (CPU) col0 sh gr
/Times-Roman ff 200.00 scf sf
1650 1800 m
gs 1 -1 sc (Reg's) col0 sh gr
/Times-Roman ff 200.00 scf sf
5400 3750 m
gs 1 -1 sc (DATA) col0 sh gr
/Times-Roman ff 200.00 scf sf
9900 450 m
gs 1 -1 sc (RAM) col0 sh gr
/Times-Roman ff 200.00 scf sf
9750 6150 m
gs 1 -1 sc (I/O) col0 sh gr
/Times-Roman ff 200.00 scf sf
9750 6405 m
gs 1 -1 sc (Controllers) col0 sh gr
/Times-Roman ff 200.00 scf sf
12600 6000 m
gs 1 -1 sc (Input devices) col0 sh gr
/Times-Roman ff 200.00 scf sf
12600 6600 m
gs 1 -1 sc (Output devices) col0 sh gr
/Times-Roman ff 200.00 scf sf
12600 7950 m
gs 1 -1 sc (Mass) col0 sh gr
/Times-Roman ff 200.00 scf sf
12600 8205 m
gs 1 -1 sc (Storage) col0 sh gr
/Times-Roman ff 200.00 scf sf
12600 8460 m
gs 1 -1 sc (\(e.g.) col0 sh gr
/Times-Roman ff 200.00 scf sf
12600 8715 m
gs 1 -1 sc (HDD\)) col0 sh gr
/Times-Roman ff 200.00 scf sf
5400 1050 m
gs 1 -1 sc (ADDR) col0 sh gr
/Times-Roman ff 200.00 scf sf
9900 1200 m
gs 1 -1 sc (PROG 1) col0 sh gr
/Times-Roman ff 200.00 scf sf
9900 1455 m
gs 1 -1 sc (\(code\)) col0 sh gr
/Times-Roman ff 200.00 scf sf
9900 2700 m
gs 1 -1 sc (DATA 1) col0 sh gr
/Times-Roman ff 200.00 scf sf
9750 3750 m
gs 1 -1 sc (Libraries &) col0 sh gr
/Times-Roman ff 200.00 scf sf
9750 4005 m
gs 1 -1 sc (Device) col0 sh gr
/Times-Roman ff 200.00 scf sf
9750 4260 m
gs 1 -1 sc (Drivers) col0 sh gr
/Times-Roman ff 200.00 scf sf
1800 2700 m
gs 1 -1 sc (PC) col0 sh gr
/Times-Roman ff 200.00 scf sf
3300 1800 m
gs 1 -1 sc (Instruction) col0 sh gr
/Times-Roman ff 200.00 scf sf
3300 2055 m
gs 1 -1 sc (Decode) col0 sh gr
/Times-Roman ff 200.00 scf sf
3450 3150 m
gs 1 -1 sc (ALU) col0 sh gr
% here ends figure;
$F2psEnd
rs
showpage
%%EndDocument
end PEND/F1 13/Times-Roman@0 SF .538(The adv)33.336 442.341 R .538(ent \
of "multiprogramming", later called "multitasking", made use of this id\
le I/O)-.195 F -.13(wa)33.336 457.341 S .637(it time.).13 F .637(Instea\
d of being restricted to a single task, multiple jobs could be loaded i\
nto)7.137 F 1.08(the machine.)33.336 472.341 R(The)7.58 E 4.331(yw)-.195
G 1.081(ould tak)-4.461 F 4.331(et)-.13 G 1.081(urns e)-4.331 F -.195
(xe)-.195 G 1.081(cuting; when a job block).195 F 1.081
(ed on I/O, another job)-.13 F -.13(wo)33.336 487.341 S 1.597
(uld be selected to run.).13 F 1.596
(After the I/O operation \214nished, the \214rst job w)8.096 F 1.596
(ould become)-.13 F 1.324(eligible to run ag)33.336 502.341 R 1.324
(ain and w)-.065 F 1.324(ould run as soon as its turn came up.)-.13 F
1.325(The operating system)7.825 F 1.086(under a multitasking system ha\
s the responsibility of switching the use of the processor)33.336
517.341 R(between jobs.)33.336 532.341 Q -.52(Wi)33.336 553.341 S 1.643
(th multiple jobs, frequently belonging to multiple users, being e).52 F
-.195(xe)-.195 G 1.644(cuted at the same).195 F 2.616
(time on the same machine, the errant operation of a program w)33.336
568.341 R 2.615(as no longer a mere)-.13 F(incon)33.336 583.341 Q -.195
(ve)-.52 G 4.98(nience. It).195 F 1.73
(became a serious problem in that if one program crashed, the entire)
4.98 F 3.505(machine crashed.)33.336 598.341 R 3.504
(In addition, a malfunctioning program could accidentally e)10.005 F
-.195(xe)-.195 G(cute).195 E .618
(instructions or access memory locations or de)33.336 613.341 R .618
(vice re)-.325 F .618(gisters that could ph)-.195 F .619
(ysically damage)-.065 F 1.422(the machine \(man)33.336 628.341 R 4.672
(ye)-.195 G 1.422
(lectromechanical peripherals such as printers and disk dri)-4.672 F
-.195(ve)-.325 G 4.671(sw).195 G(ere)-4.671 E .578(controlled directly)
33.336 643.341 R 3.828(,s)-.845 G .578(uch that it w)-3.828 F .578
(as possible to e.g. run the disk dri)-.13 F .968 -.195(ve h)-.325 H
.578(ead of).195 F 3.828(ft)-.325 G .579(he end of)-3.828 F
(the platter\) or cause the destruction or corruption of data.)33.336
658.341 Q(Unacceptable!)6.5 E 5.774(The solution w)33.336 679.341 R
5.774(as to introduce hardw)-.13 F 5.773(are-based protection.)-.13 F
5.773(Computers with such)12.273 F .06(protection run in one of tw)
33.336 694.341 R 3.31(om)-.13 G 3.31(odes. In)-3.31 F .061
(the "Supervisor", aka "K)3.31 F .061(ernel", aka "System", aka)-.325 F
("Pri)33.336 709.341 Q(vile)-.325 E 1.153
(ged", aka "Real" mode the system beha)-.195 F -.195(ve)-.26 G 4.402(si)
.195 G 1.152(dentically to an unprotected system.)-4.402 F 2.537
(In "User" mode, certain instructions and direct access to the machine')
33.336 724.341 R 5.788(sh)-.715 G(ardw)-5.788 E 2.538(are are)-.13 F
(disallo)33.336 739.341 Q 1.176(wed, including, ob)-.325 F(viously)-.195
E 4.426(,t)-.845 G 1.176
(he ability to switch the machine back into Supervisor)-4.426 F 0 Cg EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 1/pg 3)73.998 E(\2512016 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25
E/F1 13/Times-Roman@0 SF 4.244(mode. Further)33.336 120 R .994
(protection is af)4.244 F .995(forded by Memory Management hardw)-.325 F
.995(are \(MMU\) which)-.13 F .899(partitions the ph)33.336 135 R .898
(ysical random-access memory \(RAM\) of the machine into sections.)-.065
F(An)7.398 E 2.328
(attempt to read or write to an address outside of a program')33.336 150
R 5.578(sa)-.715 G 2.328(ssigned address space)-5.578 F
(causes the operation to be denied and an error raised.)33.336 165 Q
1.604(The Operating System could no)33.336 186 R 4.854(wb)-.325 G 4.854
(ec)-4.854 G 1.604(learly vie)-4.854 F 1.604(wed as ha)-.325 F 1.604
(ving a "k)-.26 F 1.604(ernel", meaning the)-.13 F .255
(collection of operating system code which is run in Supervisor mode.)
33.336 201 R .255(When the machine)6.755 F 2.28
(is \214rst bootstrapped, the k)33.336 216 R 2.28
(ernel is loaded into memory and e)-.13 F -.195(xe)-.195 G 2.28
(cution be).195 F 2.28(gins with the)-.195 F .506
(machine in Supervisor Mode.)33.336 231 R .506(When the k)7.006 F .506
(ernel selects a user program to run, it transfers)-.13 F 1.083
(control to the user program while at the same time de-acti)33.336 246 R
-.325(va)-.325 G 1.083(ting Supervisor mode.).325 F(The)7.583 E 2.648
(user program runs in User Mode, whereby it is pre)33.336 261 R -.195
(ve)-.325 G 2.649(nted from causing harm to the).195 F
(system through errant operation.)33.336 276 Q 0 0 432 765 -295.341 523
51.336 592.341 PBEGIN
%%BeginDocument: procmodel-mult.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: procmodel.fig
%%Creator: fig2dev Version 3.2 Patchlevel 4
%%CreationDate: Thu Sep  8 23:27:30 2016
%%For: hak@lex ()
%%BoundingBox: 0 0 765 523
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
newpath 0 523 moveto 0 0 lineto 765 0 lineto 765 523 lineto closepath clip newpath
-71.3 540.7 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y tr xrad yrad sc 0 0 1 startangle endangle arc
	closepath
	savematrix setmatrix
	} def

/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
0 slj 0 slc
 0.06000 0.06000 sc
%
% Fig objects follow
%
% 
% here starts figure with depth 54
% Polyline
7.500 slw
gs  clippath
6615 1230 m 6615 1170 l 6463 1170 l 6583 1200 l 6463 1230 l cp
eoclip
n 4500 1200 m
 6600 1200 l gs col0 s gr gr

% arrowhead
n 6463 1230 m 6583 1200 l 6463 1170 l  col0 s
% Polyline
n 6600 600 m 8100 600 l 8100 1800 l 6600 1800 l
 cp gs col0 s gr 
% Polyline
n 9600 900 m 10800 900 l 10800 1350 l 9600 1350 l
 cp gs col0 s gr 
% Polyline
n 9600 1500 m 10800 1500 l 10800 1950 l 9600 1950 l
 cp gs col0 s gr 
% Polyline
n 9600 2100 m 10800 2100 l 10800 2550 l 9600 2550 l
 cp gs col0 s gr 
% Polyline
n 9600 2700 m 10800 2700 l 10800 3150 l 9600 3150 l
 cp gs col0 s gr 
% Polyline
n 9600 3300 m 10800 3300 l 10800 3750 l 9600 3750 l
 cp gs col0 s gr 
% Polyline
n 9600 3900 m 10800 3900 l 10800 4350 l 9600 4350 l
 cp gs col0 s gr 
% Polyline
n 9600 4650 m 10800 4650 l 10800 4950 l 9600 4950 l
 cp gs col0 s gr 
% Polyline
n 9450 4500 m 10950 4500 l 10950 5400 l 9450 5400 l
 cp gs col0 s gr 
% Polyline
n 9600 5100 m 10800 5100 l 10800 5400 l 9600 5400 l
 cp gs col0 s gr 
% Polyline
gs  clippath
10934 5103 m 10957 5159 l 11097 5103 l 10975 5120 l 11075 5047 l cp
eoclip
n 11710 4826 m
 10960 5126 l gs col0 s gr gr

% arrowhead
n 11075 5047 m 10975 5120 l 11097 5103 l  col0 s
% Polyline
gs  clippath
9315 1230 m 9315 1170 l 9163 1170 l 9283 1200 l 9163 1230 l cp
eoclip
n 8100 1200 m
 9300 1200 l gs col0 s gr gr

% arrowhead
n 9163 1230 m 9283 1200 l 9163 1170 l  col0 s
% Polyline
n 9450 3300 m 10950 3300 l 10950 4350 l 9450 4350 l
 cp gs col0 s gr 
% Polyline
n 9450 2100 m 10950 2100 l 10950 3150 l 9450 3150 l
 cp gs col0 s gr 
% Polyline
n 9450 900 m 10950 900 l 10950 1950 l 9450 1950 l
 cp gs col0 s gr 
/Times-Roman ff 200.00 scf sf
7200 1200 m
gs 1 -1 sc (MMU) col0 sh gr
/Times-Roman ff 200.00 scf sf
4800 1050 m
gs 1 -1 sc (VIRT) col0 sh gr
/Times-Roman ff 200.00 scf sf
9900 4800 m
gs 1 -1 sc (code) col0 sh gr
/Times-Roman ff 200.00 scf sf
9900 5250 m
gs 1 -1 sc (data) col0 sh gr
/Times-Roman ff 200.00 scf sf
10050 1200 m
gs 1 -1 sc (P1) col0 sh gr
/Times-Roman ff 200.00 scf sf
10050 1800 m
gs 1 -1 sc (D1) col0 sh gr
/Times-Roman ff 200.00 scf sf
10050 2400 m
gs 1 -1 sc (P2) col0 sh gr
/Times-Roman ff 200.00 scf sf
10050 3000 m
gs 1 -1 sc (D2) col0 sh gr
/Times-Roman ff 200.00 scf sf
10050 3600 m
gs 1 -1 sc (P3) col0 sh gr
/Times-Roman ff 200.00 scf sf
10050 4200 m
gs 1 -1 sc (D3) col0 sh gr
/Times-Roman ff 200.00 scf sf
11400 4800 m
gs 1 -1 sc (Kernel) col0 sh gr
% here ends figure;
% 
% here starts figure with depth 51
% Polyline
7.500 slw
n 1500 3000 m 2700 3000 l 2700 3300 l 1500 3300 l
 cp gs col4 s gr 
/Times-Roman ff 200.00 scf sf
1950 3300 m
gs 1 -1 sc (U/S) col4 sh gr
% Ellipse
n 12900 7350 600 150 0 360 DrawEllipse gs col0 s gr

% Polyline
n 1200 600 m 4500 600 l 4500 4800 l 1200 4800 l
 cp gs col0 s gr 
% Polyline
n 1500 1500 m 2700 1500 l 2700 3600 l 1500 3600 l
 cp gs col0 s gr 
% Polyline
gs  clippath
9315 3930 m 9315 3870 l 9163 3870 l 9283 3900 l 9163 3930 l cp
4485 3870 m 4485 3930 l 4637 3930 l 4517 3900 l 4637 3870 l cp
eoclip
n 4500 3900 m
 9300 3900 l gs col0 s gr gr

% arrowhead
n 4637 3870 m 4517 3900 l 4637 3930 l  col0 s
% arrowhead
n 9163 3930 m 9283 3900 l 9163 3870 l  col0 s
% Polyline
gs  clippath
9315 6030 m 9315 5970 l 9163 5970 l 9283 6000 l 9163 6030 l cp
eoclip
n 8400 1200 m 8400 6000 l
 9300 6000 l gs col0 s gr gr

% arrowhead
n 9163 6030 m 9283 6000 l 9163 5970 l  col0 s
% Polyline
gs  clippath
9315 6930 m 9315 6870 l 9163 6870 l 9283 6900 l 9163 6930 l cp
eoclip
n 8700 3900 m 8700 6900 l
 9300 6900 l gs col0 s gr gr

% arrowhead
n 9163 6930 m 9283 6900 l 9163 6870 l  col0 s
% Polyline
n 9300 5700 m 11100 5700 l 11100 8100 l 9300 8100 l
 cp gs col0 s gr 
% Polyline
gs  clippath
11085 5970 m 11085 6030 l 11237 6030 l 11117 6000 l 11237 5970 l cp
eoclip
n 12600 6000 m
 11100 6000 l gs col0 s gr gr

% arrowhead
n 11237 5970 m 11117 6000 l 11237 6030 l  col0 s
% Polyline
gs  clippath
12615 6630 m 12615 6570 l 12463 6570 l 12583 6600 l 12463 6630 l cp
eoclip
n 11100 6600 m
 12600 6600 l gs col0 s gr gr

% arrowhead
n 12463 6630 m 12583 6600 l 12463 6570 l  col0 s
% Polyline
gs  clippath
12315 7530 m 12315 7470 l 12163 7470 l 12283 7500 l 12163 7530 l cp
11085 7470 m 11085 7530 l 11237 7530 l 11117 7500 l 11237 7470 l cp
eoclip
n 11100 7500 m
 12300 7500 l gs col0 s gr gr

% arrowhead
n 11237 7470 m 11117 7500 l 11237 7530 l  col0 s
% arrowhead
n 12163 7530 m 12283 7500 l 12163 7470 l  col0 s
% Polyline
n 13500 7350 m 13500 9000 l 12300 9000 l
 12300 7350 l gs col0 s gr 
% Polyline
n 1500 2400 m 2700 2400 l 2700 2700 l 1500 2700 l
 cp gs col0 s gr 
% Polyline
n 3150 1500 m 4350 1500 l 4350 2550 l 3150 2550 l
 cp gs col0 s gr 
% Polyline
n 3150 2700 m 4350 2700 l 4350 3900 l 3150 3900 l
 cp gs col0 s gr 
% Polyline
n 9300 600 m 11100 600 l 11100 5550 l 9300 5550 l
 cp gs col0 s gr 
/Times-Roman ff 200.00 scf sf
2250 1050 m
gs 1 -1 sc (CPU) col0 sh gr
/Times-Roman ff 200.00 scf sf
1650 1800 m
gs 1 -1 sc (Reg's) col0 sh gr
/Times-Roman ff 200.00 scf sf
5400 3750 m
gs 1 -1 sc (DATA) col0 sh gr
/Times-Roman ff 200.00 scf sf
9900 450 m
gs 1 -1 sc (RAM) col0 sh gr
/Times-Roman ff 200.00 scf sf
9750 6150 m
gs 1 -1 sc (I/O) col0 sh gr
/Times-Roman ff 200.00 scf sf
9750 6405 m
gs 1 -1 sc (Controllers) col0 sh gr
/Times-Roman ff 200.00 scf sf
12600 6000 m
gs 1 -1 sc (Input devices) col0 sh gr
/Times-Roman ff 200.00 scf sf
12600 6600 m
gs 1 -1 sc (Output devices) col0 sh gr
/Times-Roman ff 200.00 scf sf
12600 7950 m
gs 1 -1 sc (Mass) col0 sh gr
/Times-Roman ff 200.00 scf sf
12600 8205 m
gs 1 -1 sc (Storage) col0 sh gr
/Times-Roman ff 200.00 scf sf
12600 8460 m
gs 1 -1 sc (\(e.g.) col0 sh gr
/Times-Roman ff 200.00 scf sf
12600 8715 m
gs 1 -1 sc (HDD\)) col0 sh gr
/Times-Roman ff 200.00 scf sf
5400 1050 m
gs 1 -1 sc (ADDR) col0 sh gr
/Times-Roman ff 200.00 scf sf
1800 2700 m
gs 1 -1 sc (PC) col0 sh gr
/Times-Roman ff 200.00 scf sf
3300 1800 m
gs 1 -1 sc (Instruction) col0 sh gr
/Times-Roman ff 200.00 scf sf
3300 2055 m
gs 1 -1 sc (Decode) col0 sh gr
/Times-Roman ff 200.00 scf sf
3450 3150 m
gs 1 -1 sc (ALU) col0 sh gr
% here ends figure;
$F2psEnd
rs
showpage
%%EndDocument
end PEND 1.756(As an aside, note that the rise of the "Personal Compute\
r" in the late 1970s and early)33.336 619.341 R 1.056(1980s in man)
33.336 634.341 R 4.306(yw)-.195 G 1.056(ays represented a re)-4.436 F
4.306(gression. The)-.195 F 1.056(Personal Computer w)4.306 F 1.056
(as, in terms of)-.13 F 1.952(architecture and sophistication, equi)
33.336 649.341 R -.325(va)-.325 G 1.951(lent to the more primiti).325 F
2.341 -.195(ve m)-.325 H 1.951(achines of the early).195 F 4.015
(1960s. It)33.336 664.341 R -.13(wa)4.016 G 4.016(sd).13 G .766
(istinctly personal, single-user and single-tasking.)-4.016 F .766
(The ability to do more)7.266 F .204(than one thing at a time and the i\
dea that a single bad program should not crash the entire)33.336 679.341
R .746(machine took man)33.336 694.341 R 3.997(yy)-.195 G .747
(ears to re-enter the computing mainstream, although such concepts)
-3.997 F(had been understood and accepted for o)33.336 709.341 Q -.195
(ve)-.195 G 3.25(r2).195 G 3.25(0y)-3.25 G(ears prior)-3.25 E(.)-.715 E
-1.04(To)33.336 730.341 S(day)1.04 E 3.809(,o)-.845 G .559
(perating systems are found on a wide v)-3.809 F .559
(ariety of computing de)-.325 F .559(vices with v)-.325 F(arying)-.325 E
3.23(amounts of memory)33.336 745.341 R 6.48(,s)-.845 G 3.231
(torage, processing and connecti)-6.48 F(vity)-.325 E 9.731(.T)-.845 G
3.231(raditional cate)-10.186 F(gorization)-.195 E 0 Cg EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 1/pg 4)73.998 E(\2512016 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25
E/F1 13/Times-Roman@0 SF .079(based on mark)33.336 120 R .079(et tar)
-.13 F .079(get \(such as "desktop" or "serv)-.234 F .079
(er"\) is confusing at best because almost)-.195 F 1.72
(all operating systems ha)33.336 135 R 2.11 -.195(ve s)-.26 H 1.72
(ome crosso).195 F -.195(ve)-.195 G 4.97(rc).195 G 4.97(omponents. But)
-4.97 F 1.721(here are some "tags" and)4.97 F
(their commonly understood meanings:)33.336 150 Q 3.952<8350>33.336 180
S .701(ersonal: designed to pro)-3.952 F .701
(vide services to a human user who is locally connected to the)-.195 F
5.843(computing de)33.336 195 R 5.843(vice via human input/output de)
-.325 F 5.844(vices such as k)-.325 F -.195(ey)-.13 G 5.844
(board, display or).195 F(mouse/touchscreen.)33.336 210 Q 5.077<8353>
33.336 240 S(erv)-5.077 E 1.827(er: designed to pro)-.195 F 1.826
(vide services to remote human users or non-human programs)-.195 F
(running on other de)33.336 255 Q
(vices, by means of a communications netw)-.325 E(ork.)-.13 E 4.66<8345>
33.336 285 S 1.41
(mbedded: designed primarily to monitor and/or control real-w)-4.66 F
1.411(orld ph)-.13 F 1.411(ysical systems.)-.065 F(E.g. automoti)33.336
300 Q .39 -.195(ve e)-.325 H(ngine controls, traf).195 E
(\214c lights, biomedical.)-.325 E 3.25<834d>33.336 330 S
(obile: designed to pro)-3.25 E(vide connecti)-.195 E
(vity and content services to mobile human users.)-.325 E 3.631
(In this course, the majority of discussion will be of serv)33.336 366 R
3.631(er and personal operating)-.195 F 4.345(systems. W)33.336 381 R
4.345(ew)-1.04 G 1.095(ill concentrate primarily on the k)-4.345 F 1.096
(ernel, both its internal construction and)-.13 F 3.183
(the programming interf)33.336 396 R 3.183(aces to it.)-.13 F 3.183
(Although there are softw)9.683 F 3.182(are components, such as)-.13 F
2.429(system libraries, which are often thought of as part of the opera\
ting system, we will)33.336 411 R 1.248(attempt to k)33.336 426 R 1.248
(eep the distinction clear between what happens within the k)-.13 F
1.248(ernel, and what)-.13 F(occurs outside of it.)33.336 441 Q/F2 13
/Times-Bold@0 SF(Ser)147.521 471 Q(vices Pr)-.13 E -.13(ov)-.234 G
(ided by the Operating System).13 E F1 2.604
(When people speak informally about Operating Systems, the)33.336 501 R
5.854(yo)-.195 G 2.604(ften include softw)-5.854 F(are)-.13 E .223
(components which are not part of the k)33.336 516 R 3.473(ernel. These)
-.13 F .223(components may be libraries that are)3.473 F 1.714
(supplied by the system, programs which run in the background to pro)
33.336 531 R 1.714(vide services, or)-.195 F -2.795 -.325(ev e)33.336
546 T 5.177(ne).325 G 1.927(ntire applications.)-5.177 F 1.927
(Here are some of the broad cate)8.427 F 1.927
(gories of services which are)-.195 F(pro)33.336 561 Q(vided by the k)
-.195 E(ernel itself, and which we will be e)-.13 E
(xamining during the course:)-.195 E 5.224<8342>33.336 576 S 1.975(oots\
trap/Initialization: Bringing the machine from an initial state after p\
o)-5.224 F(wer)-.325 E 1.975(-up or)-.26 F
(reboot to a functioning state.)33.336 591 Q 7.376<8344>33.336 606 S
-.325(ev)-7.376 G 4.126(ice Dri).325 F -.195(ve)-.325 G 4.126
(rs: Interf).195 F 4.126(acing with de)-.13 F 4.125(vices at the hardw)
-.325 F 4.125(are le)-.13 F -.195(ve)-.325 G 7.375(la).195 G 4.125
(nd isolating the)-7.375 F(programmer or end user from those details.)
33.336 621 Q 3.806<8353>33.336 636 S .556
(torage/Filesystems: Managing b)-3.806 F .556(ulk storage de)-.26 F .557
(vices such as disks and or)-.325 F -.065(ga)-.234 G .557(nizing them)
.065 F(to pro)33.336 651 Q(vide directories, \214les, etc.)-.195 E 5.226
<834d>33.336 666 S 1.976(emory Management: Controlling the pool of ph)
-5.226 F 1.976(ysical memory and allocating it as)-.065 F
(needed using the virtual memory illusion.)33.336 681 Q 6.697<8353>
33.336 696 S 3.448(cheduling: Controlling the illusion of virtual proce\
ssors and allocating processor)-6.697 F(resources f)33.336 711 Q
(airly among competing processes.)-.13 E 3.448<8353>33.336 726 S .197(e\
curity: Determining the identity and authorization pro\214les of users \
and programs, and)-3.448 F(enforcing the desired protections ag)33.336
741 Q(ainst unauthorized access.)-.065 E 0 Cg EP
%%Page: 5 5
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 1/pg 5)73.998 E(\2512016 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25
E/F1 13/Times-Roman@0 SF 3.93<8343>33.336 120 S .68(ommunication: Allo)
-3.93 F .68
(wing programs and users, either on the same machine or across a)-.325 F
(netw)33.336 135 Q(ork, to communicate.)-.13 E/F2 13/Times-Bold@0 SF
(Illusions)243.851 150 Q F1 .22(The operating system k)33.336 186 R .22
(ernel assumes control of the computer at boot time and remains in)-.13
F .107(command as the system runs.)33.336 201 R .107(The k)6.607 F .107
(ernel periodically relinquishes control, in a deliberate)-.13 F 3.293
(and re)33.336 216 R 3.293(gulated manner)-.195 F 6.543(,t)-.52 G 6.543
(ou)-6.543 G(ser)-6.543 E 3.293(-mode processes.)-.26 F 3.292(The k)
9.793 F 3.292(ernel, in conjunction with the)-.13 F 3.28
(processor hardw)33.336 231 R 3.28(are, is able to maintain se)-.13 F
-.195(ve)-.325 G 3.28(ral critical).195 F/F3 13/Times-Italic@0 SF
(illusions)6.53 E F1 3.281(with respect to the)6.531 F
(standpoint of these user)33.336 246 Q(-le)-.26 E -.195(ve)-.325 G 3.25
(lp).195 G(rograms.)-3.25 E 4.019(The \214rst illusion is that of)33.336
267 R F2 4.019(virtual pr)7.269 F(ocessors)-.234 E F1 7.269(,o)C(r)
-7.269 E F2(multi-tasking)7.269 E F1 10.519(.T)C 4.019(he use of the)
-10.519 F 1.336(processor \(for no)33.336 282 R 3.027 -.845(w, t)-.325 H
4.587(os).845 G 1.337
(implify the material, we will assume a single-processor system,)-4.587
F -.26(bu)33.336 297 S 4.818(tl).26 G 1.568
(ater in the course we will fully e)-4.818 F 1.568
(xplore modern multi-processor designs\) is shared)-.195 F .929
(among the man)33.336 312 R 4.179(yu)-.195 G(ser)-4.179 E(-le)-.26 E
-.195(ve)-.325 G 4.179(lp).195 G .93
(rograms currently running on the computer)-4.179 F 7.43(.I)-.715 G 4.18
(ne)-7.43 G -.325(ff)-4.18 G .93(ect, each).325 F
(program has the use of a virtual processor)33.336 327 Q(.)-.715 E 1.642
(This sharing is done by)33.336 348 R F2(time-slicing)4.892 E F1 4.892
(,s)C 1.641(uch that program A runs on the processor for a)-4.892 F
2.215(number of instruction c)33.336 363 R 2.215
(ycles, then another program B runs, then program C, etc. and)-.195 F
-2.795 -.325(ev e)33.336 378 T 1.46(ntually program A runs ag).325 F
4.709(ain. When)-.065 F -.195(exe)4.709 G 1.459
(cution resumes in program A, all re).195 F(gisters)-.195 E .454
(and other critical state information are restored and e)33.336 393 R
-.195(xe)-.195 G .454(cution continues just where it had).195 F 1.987
(left of)33.336 408 R 1.987(f, through a softw)-.325 F 1.987
(are technique kno)-.13 F 1.987(wn as)-.325 F F3(conte)5.237 E 1.987
(xt switc)-.26 F(hing)-.195 E(.)-.195 E F1 1.987(Thus, the f)8.487 F
1.987(act that)-.13 F(other programs had run in the interv)33.336 423 Q
(ening time is transparent to the program')-.195 E 3.25(sc)-.715 G(ode.)
-3.25 E .315(The second illusion is)33.336 444 R F2 .315(virtual memory)
3.565 F F1 6.815(.W)C .315(hen user)-6.815 F(-le)-.26 E -.195(ve)-.325 G
3.565(lc).195 G .315(ode is e)-3.565 F -.195(xe)-.195 G .316
(cuting, all addresses).195 F .214
(used in the program are virtual addresses.)33.336 459 R 3.464(Ac)6.714
G .214(omponent of the processor hardw)-3.464 F .214(are called)-.13 F
(the)33.336 474 Q F2 2.47(memory management unit)5.72 F F1 2.47
(\(MMU\) sits between the virtual addresses which are)5.72 F 4.384
(generated by program e)33.336 489 R -.195(xe)-.195 G 4.383
(cution \(instruction fetches and data read/writes\) and the).195 F(ph)
33.336 504 Q
(ysical addresses which are output on the address pins of the processor)
-.065 E(.)-.715 E .698(The k)33.336 525 R .698
(ernel, by using the processor re)-.13 F .698
(gisters which control the MMU, is able to establish)-.195 F .828
(the mapping between virtual and ph)33.336 540 R .828(ysical addresses.)
-.065 F .828(This can be changed by the k)7.328 F(ernel)-.13 E 1.179
(as each program e)33.336 555 R -.195(xe)-.195 G 4.429(cutes. Hence).195
F 1.179(the k)4.429 F 1.179
(ernel has the ability to control completely all of)-.13 F
(the memory which a user)33.336 570 Q(-le)-.26 E -.195(ve)-.325 G 3.25
(lp).195 G(rogram can "see.")-3.25 E .736(The k)33.336 591 R .735
(ernel can also use the MMU and its control o)-.13 F -.195(ve)-.195 G
3.985(rv).195 G .735(irtual address space to allo)-3.985 F 3.985(wt)
-.325 G(he)-3.985 E 2.048
(grand total of RAM in use by all of the programs on the computer e)
33.336 606 R 2.049(xceed the actual)-.195 F 1.518(amount of ph)33.336
621 R 1.518(ysical RAM.)-.065 F 1.518
(It does this by using disk or other storage to hold the data.)8.018 F
.064(When an area of a program')33.336 636 R 3.314(sv)-.715 G .064
(irtual address space does not currently ha)-3.314 F .454 -.195(ve a)
-.26 H 3.315(na).195 G .065(ctual place)-3.315 F 2.197(in ph)33.336 651
R 2.197(ysical memory to hold it, the MMU \215ags that area as missing.)
-.065 F 2.197(Then, when the)8.697 F .027(program attempts to access th\
e missing area, an interrupt is generated.)33.336 666 R .027
(This is kno)6.527 F .027(wn as a)-.325 F F2 1.789(page fault)33.336 681
R F1 8.289(.T)C 1.789(he k)-8.289 F 1.789(ernel allocates an a)-.13 F
-.325(va)-.26 G 1.788(ilable chunk of ph).325 F 1.788
(ysical RAM and maps it in,)-.065 F(then resumes e)33.336 696 Q -.195
(xe)-.195 G(cution of the program.).195 E 3.109
(Therefore, we see that the k)33.336 717 R 3.11
(ernel has complete control o)-.13 F -.195(ve)-.195 G 6.36(rt).195 G
3.11(he w)-6.36 F 3.11(orld vie)-.13 F 6.36(wo)-.325 G 6.36(fa)-6.36 G
-.195(ny)-6.36 G 2.73(program on the computer)33.336 732 R 9.23(.T)-.715
G 2.73(his combination of virtual processor and virtual address)-9.23 F
0 Cg EP
%%Page: 6 6
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 1/pg 6)73.998 E(\2512016 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25
E/F1 13/Times-Roman@0 SF 2.278(space forms a virtual equi)33.336 120 R
-.325(va)-.325 G 2.279(lent of the the old-f).325 F 2.279
(ashioned single-purpose computer for)-.13 F .436(each program.)33.336
135 R .435(Such a "virtual computer" \(note: this is not a reference to\
 virtual machine)6.936 F 1.218(\(VM\) softw)33.336 150 R 1.218
(are such as VMW)-.13 F 1.218(are or V)-1.04 F 1.218(irtualBox\) is kno)
-.78 F 1.218(wn as a)-.325 F/F2 13/Times-Bold@0 SF(pr)4.469 E(ocess)
-.234 E F1 7.719(.T)C 1.219(he process is)-7.719 F 2.992
(the cornerstone of multi-user)33.336 165 R 6.242(,m)-.52 G 2.991
(ulti-tasking computing.)-6.242 F 2.991(In UNIX operating systems,)9.491
F .157(each command launched from the shell such as)33.336 180 R/F3 13
/Courier@0 SF(ls)3.408 E F1 .158(is e)3.408 F -.195(xe)-.195 G .158
(cuted in a ne).195 F 3.408(wp)-.325 G 6.658(rocess. W)-3.408 F 3.408
(ec)-1.04 G(an)-3.408 E .533(think of a process as a brand-ne)33.336 195
R 3.783(wv)-.325 G .533
(irtual computer into which the program is loaded and)-3.783 F -.195
(exe)33.336 210 S 3.25(cuted. When).195 F
(the program has completed, the virtual computer is discarded.)3.25 E
2.176
(Because of time-slicing, the actual run time of a program as observ)
33.336 231 R 2.176(ed by an e)-.195 F(xternal)-.195 E(observ)33.336 246
Q 1.088(er may v)-.195 F 1.087(ary from run to run, depending on ho)
-.325 F 4.337(wm)-.325 G(an)-4.337 E 4.337(yo)-.195 G 1.087
(ther processes shared the)-4.337 F .217(use of the CPU.)33.336 261 R
.217
(The operating system records the total amount of time for which a gi)
6.717 F -.195(ve)-.325 G(n).195 E .501(process has use of the processor)
33.336 276 R 7.001(.T)-.715 G .5(his time is di)-7.001 F .5
(vided into tw)-.325 F 3.75(om)-.13 G(easurements:)-3.75 E F2 .5
(user time)3.75 F F1(and)33.336 291 Q F2 .632(system time)3.882 F F1
7.132(.T)C .632(he former is the time the process spent e)-7.132 F -.195
(xe)-.195 G .633(cuting its user).195 F(-le)-.26 E -.195(ve)-.325 G
3.883(lc).195 G(ode,)-3.883 E 1.304(and the latter is the time spent e)
33.336 306 R -.195(xe)-.195 G 1.303(cuting k).195 F(ernel-le)-.13 E
-.195(ve)-.325 G 4.553(lc).195 G 1.303(ode on the behalf of the process)
-4.553 F 6.362(\(e.g. responding to system calls as described belo)
33.336 321 R 9.613(w\). The)-.325 F 6.363(sum of these tw)9.613 F(o)-.13
E .512(measurements is the actual time spent doing useful w)33.336 336 R
.511(ork, and will al)-.13 F -.13(wa)-.13 G .511(ys be less than or).13
F .931(equal to the)33.336 351 R F2 -.234(re)4.181 G .931(al time).234 F
F1 .931(elapsed, which is also called)4.181 F F2 .932(wall time)4.181 F
F1 4.182(,i)C .932(.e. the time spent by the)-4.182 F
(user staring at the w)33.336 366 Q(all w)-.13 E
(aiting for the program to complete.)-.13 E 2.58 -1.04(We w)33.336 387 T
.5(ill e)1.04 F .499(xplore processes, time-slicing and virtual memory \
at great length in subsequent)-.195 F(units.)33.336 402 Q F2 -.325(Ke)
173.001 417 S -.195(rn).325 G(el Re-entry: The System Call).195 E F1
4.06(Au)33.336 453 S(ser)-4.06 E .81(-mode program \214nds itself e)-.26
F -.195(xe)-.195 G .81(cuting within the protecti).195 F 1.2 -.195(ve b)
-.325 H .81(ubble of a process.)-.065 F(It)7.31 E 2.012
(is not able to touch control re)33.336 468 R 2.012(gisters, I/O de)
-.195 F 2.012(vices or other sensiti)-.325 F 2.402 -.195(ve r)-.325 H
2.012(esources directly).195 F(.)-.845 E .338
(There must be some means of penetrating that b)33.336 483 R .338
(ubble in a controlled manner and g)-.26 F(aining)-.065 E 3.897
(access to required resources and services.)33.336 498 R 5.977 -1.04
(We s)10.397 H 3.897(hall see that there are three basic)1.04 F .977
(mechanisms, all of which are supported by hard-wired logic b)33.336 513
R .977(uilt in to the CPU.)-.26 F(These)7.477 E 1.136(are: hardw)33.336
528 R 1.136(are interrupt, instruction f)-.13 F 1.136
(ault, and system call.)-.13 F 1.136(In this unit, we will consider)
7.636 F(the last mechanism, as an introduction to user)33.336 543 Q(-k)
-.26 E(ernel interf)-.13 E(acing.)-.13 E 5.067(AS)33.336 564 S 1.817
(ystem Call is a controlled transition from user mode back into k)-5.067
F 1.818(ernel mode.)-.13 F(This)8.318 E 2.72(requires e)33.336 579 R
-.195(xe)-.195 G 2.72(cution of hardw).195 F 2.72
(are-speci\214c, specialized opcodes.)-.13 F 2.72(Because the method of)
9.22 F .697(making a system call will v)33.336 594 R .698
(ary from platform to platform, this detail is isolated from the)-.325 F
2.95(programmer by the system libraries.)33.336 609 R 2.95
(When writing a program in the C language, a)9.45 F 1.242
(system call appears to be just another function call.)33.336 624 R
1.243(It is the con)7.743 F -.195(ve)-.52 G 1.243(ntion among UNIX-).195
F(lik)33.336 639 Q 3.263(es)-.13 G .013(ystems that system calls are do\
cumented in section \(2\) of the man pages, while other)-3.263 F
(standard library functions are in section \(3\).)33.336 654 Q 4.856
(The set of system calls a)33.336 675 R -.325(va)-.26 G 4.856
(ilable to the user program is well-de\214ned and well-).325 F 3.708
(documented. The)33.336 690 R -.13(ke)3.708 G .458(rnel must be e).13 F
.458(xtra-careful to v)-.195 F .458
(erify all of the parameters passed to it)-.195 F .129
(during the system call and a)33.336 705 R -.26(vo)-.26 G .129
(id accidental or deliberate corruption of the system through).26 F
-.065(ga)33.336 720 S(rbage data.).065 E(The follo)33.336 741 Q
(wing is an o)-.325 E -.195(ve)-.195 G(rvie).195 E 3.25(wo)-.325 G 3.25
(fas)-3.25 G(ystem call:)-3.25 E 0 Cg EP
%%Page: 7 7
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 1/pg 7)73.998 E(\2512016 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25
E/F1 13/Times-Roman@0 SF 4.843<8354>33.336 120 S 1.593(he user)-4.843 F
1.593(-mode program mak)-.26 F 1.592
(es an ordinary function call to a function of a speci\214ed,)-.13 F
2.566(standardized name, such as)33.336 135 R/F2 13/Courier@0 SF(open)
5.816 E F1 9.066(.T)C 2.566(his function is pro)-9.066 F 2.567
(vided by the system libraries)-.195 F(\()33.336 150 Q F2(libc)A F1
5.414(\)a)C 2.164(nd is a h)-5.414 F 2.163
(ybrid function: it is coded partially in C, and partially in assembly)
-.065 F(language.)33.336 165 Q 6.89<8354>33.336 180 S 3.64
(he system call tak)-6.89 F 3.64
(es the parameters which are passed as ordinary function call)-.13 F
2.836(parameters, and places them in the proper place \(usually re)
33.336 195 R 2.836(gisters\) where the k)-.195 F(ernel)-.13 E -.195(ex)
33.336 210 S 3.407(pects them to be.).195 F 3.407(It then in)9.907 F
-.26(vo)-.52 G -.13(ke).26 G 6.657(sas).13 G 3.407
(pecial assembly language instruction which)-6.657 F
(performs the system call.)33.336 225 Q 4.792<8354>33.336 240 S 1.542
(he CPU responds to this instruction by simultaneously ele)-4.792 F
-.325(va)-.325 G 1.541(ting back to Supervisor).325 F
(mode and jumping to a pre-arranged location in the k)33.336 255 Q
(ernel.)-.13 E 3.567<8354>33.336 270 S .317(he k)-3.567 F(ernel')-.13 E
3.567(ss)-.715 G .317(ystem call entry handler v)-3.567 F .317
(eri\214es all the parameters and if the)-.195 F 3.568(ya)-.195 G .318
(re correct,)-3.568 F -.195(exe)33.336 285 S 1.425
(cutes the system call.).195 F 1.425(E.g. in the Linux k)7.925 F 1.425
(ernel, the)-.13 F F2(open)4.675 E F1 1.424(system call in user mode)
4.675 F(corresponds to a function)33.336 300 Q F2(sys_open)3.25 E F1
(that is in)3.25 E -.26(vo)-.52 G -.13(ke).26 G 3.25(di).13 G 3.25(nk)
-3.25 G(ernel mode.)-3.38 E 5.027<8354>33.336 315 S 1.777
(he system call may tak)-5.027 F 5.027(es)-.13 G 1.777
(ome time to complete.)-5.027 F 1.778(During that time, other processes)
8.277 F .048(may be running.)33.336 330 R .047
(When the system call does complete, it has a return v)6.547 F 3.297
(alue. This)-.325 F .047(is either)3.297 F .191
(-1 \(indicating an error\) or a non-ne)33.336 345 R -.065(ga)-.195 G
(ti).065 E .581 -.195(ve n)-.325 H(umber).195 E 3.441(,w)-.52 G .191
(hich indicates success, and possibly a)-3.441 F -.325(va)33.336 360 S
(lue \(such as the number of bytes read or written\).).325 E 4.499<8354>
33.336 375 S 1.249(he k)-4.499 F 1.249
(ernel returns from the system call handler)-.13 F 7.749(.H)-.715 G
(ardw)-7.749 E 1.249(are restores to the User mode)-.13 F 2.552(and e)
33.336 390 R -.195(xe)-.195 G 2.552(cution resumes in the user).195 F
(-le)-.26 E -.195(ve)-.325 G 5.802(ll).195 G 2.552
(ibrary function, which tak)-5.802 F 2.553(es the system call)-.13 F
(return v)33.336 405 Q(alue and mak)-.325 E
(es it appear to be the return v)-.13 E
(alue from the ordinary C function.)-.325 E/F3 13/Times-Bold@0 SF
(UNIX Softwar)135.73 435 Q 3.25(ec)-.234 G(omponent lay)-3.25 E
(ers & man pages)-.13 E F1 .156(The \214gure belo)33.336 471 R 3.406(wd)
-.325 G .156(epicts ho)-3.406 F 3.406(wt)-.325 G .156
(he standard I/O and standard C library functions which are)-3.406 F
.071(documented in man section 3, call system call functions which are \
in section 2 of the man)33.336 486 R .764(pages, pro)33.336 501 R .764
(viding access via the system call interf)-.195 F .764(ace to the k)-.13
F .764(ernel itself.)-.13 F .764(The commands)7.264 F .26
(which are typically associated with the UNIX command-line en)33.336 516
R .26(vironment, in section 1 of)-.52 F(the man pages, are b)33.336 531
Q(uilt on top of the standard library functions.)-.26 E 0 Cg EP
%%Page: 8 8
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 1/pg 8)73.998 E(\2512016 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25
E 0 0 360 664 -254.819 470 87.336 374.819 PBEGIN
%%BeginDocument: layers.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: layers.fig
%%Creator: fig2dev Version 3.2 Patchlevel 4
%%CreationDate: Tue Jan 29 23:48:23 2008
%%For: hak@lex ()
%%BoundingBox: 0 0 664 470
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
newpath 0 470 moveto 0 0 lineto 664 0 lineto 664 470 lineto closepath clip newpath
-84.7 527.2 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y tr xrad yrad sc 0 0 1 startangle endangle arc
	closepath
	savematrix setmatrix
	} def

/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
0 slj 0 slc
 0.06000 0.06000 sc
%
% Fig objects follow
%
% 
% here starts figure with depth 50
% Ellipse
7.500 slw
n 6600 4875 546 546 0 360 DrawEllipse gs col0 s gr

% Ellipse
n 6600 4875 1284 1284 0 360 DrawEllipse gs col0 s gr

% Ellipse
n 6600 4875 2851 2851 0 360 DrawEllipse gs col0 s gr

% Ellipse
n 6600 4875 3903 3903 0 360 DrawEllipse gs col0 s gr

% Polyline
gs  clippath
7322 4480 m 7351 4533 l 7484 4460 l 7365 4492 l 7455 4408 l cp
eoclip
n 10650 2700 m
 7350 4500 l gs col0 s gr gr

% arrowhead
n 7455 4408 m 7365 4492 l 7484 4460 l  col0 s
% Polyline
gs  clippath
8307 5446 m 8312 5506 l 8463 5493 l 8341 5474 l 8457 5433 l cp
eoclip
n 11775 5175 m
 8325 5475 l gs col0 s gr gr

% arrowhead
n 8457 5433 m 8341 5474 l 8463 5493 l  col0 s
% Polyline
gs  clippath
4072 6850 m 4056 6792 l 3910 6831 l 4034 6829 l 3925 6889 l cp
eoclip
n 2100 7350 m
 4050 6825 l gs col0 s gr gr

% arrowhead
n 3925 6889 m 4034 6829 l 3910 6831 l  col0 s
/Times-Roman ff 200.00 scf sf
6600 4950 m
gs 1 -1 sc (kernel) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
6000 4200 m
gs 1 -1 sc (read) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
6900 4125 m
gs 1 -1 sc (write) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
7500 4875 m
gs 1 -1 sc (open) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
6900 5775 m
gs 1 -1 sc (close) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
5925 5550 m
gs 1 -1 sc (lseek) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
5775 4800 m
gs 1 -1 sc (fcntl) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
4950 3450 m
gs 1 -1 sc (fopen) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
5550 3000 m
gs 1 -1 sc (fclose) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
6225 2850 m
gs 1 -1 sc (printf) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
7050 2850 m
gs 1 -1 sc (scanf) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
7725 3150 m
gs 1 -1 sc (ftell) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
8175 3750 m
gs 1 -1 sc (ferror) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
8550 4425 m
gs 1 -1 sc (getc) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
8700 5175 m
gs 1 -1 sc (putc) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
8550 5925 m
gs 1 -1 sc (setbuf) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
8175 6675 m
gs 1 -1 sc (malloc) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
7575 7050 m
gs 1 -1 sc (free) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
6600 7125 m
gs 1 -1 sc (strcpy) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
5550 6750 m
gs 1 -1 sc (strcat) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
5025 6000 m
gs 1 -1 sc (strtok) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
4650 5175 m
gs 1 -1 sc (perror) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
4725 4350 m
gs 1 -1 sc (fseek) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
5400 1800 m
gs 1 -1 sc (ls) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
6675 1725 m
gs 1 -1 sc (cp) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
7725 1950 m
gs 1 -1 sc (mv) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
8700 2325 m
gs 1 -1 sc (sh) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
9375 3000 m
gs 1 -1 sc (dd) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
9750 4275 m
gs 1 -1 sc (cc) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
9750 5400 m
gs 1 -1 sc (ar) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
9450 6600 m
gs 1 -1 sc (tar) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
8850 7350 m
gs 1 -1 sc (grep) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
7950 7950 m
gs 1 -1 sc (sed) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
6825 8175 m
gs 1 -1 sc (awk) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
5550 7950 m
gs 1 -1 sc (perl) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
4500 7425 m
gs 1 -1 sc (stty) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
3675 6525 m
gs 1 -1 sc (man) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
4275 2325 m
gs 1 -1 sc (rm) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
3675 3075 m
gs 1 -1 sc (mkdir) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
3225 5175 m
gs 1 -1 sc (find) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
3300 4050 m
gs 1 -1 sc (rmdir) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 200.00 scf sf
10800 2700 m
gs 1 -1 sc (man 2) col0 sh gr
/Times-Roman ff 200.00 scf sf
11925 5175 m
gs 1 -1 sc (man 3) col0 sh gr
/Times-Roman ff 200.00 scf sf
1950 7425 m
gs 1 -1 sc (man 1) dup sw pop neg 0 rm  col0 sh gr
% here ends figure;
$F2psEnd
rs
showpage
%%EndDocument
end PEND/F1 13/Times-Roman@0 SF .573
(The list of de\214ned error numbers is pro)33.336 416.819 R .573
(vided in an include \214le, which pro)-.195 F .572(vides symbolic)-.195
F/F2 13/Courier@0 SF(#define)33.336 431.819 Q F1 1.189
(names for these constants.)4.439 F 1.189(The return v)7.689 F 1.189
(alue used to \215ag an error)-.325 F 4.439(,a)-.52 G 4.439(sw)-4.439 G
1.19(ell as)-4.439 F .317(which error codes may be returned, is part of\
 the documentation for each system call.)33.336 446.819 R -1.04(To)6.817
G 2.263(call up, e.g., the documentation for the)33.336 461.819 R F2
(open)5.513 E F1 2.263(system call, use the command)5.513 F F2 2.263
(man 2)5.513 F(open)33.336 476.819 Q F1 9.175(.T)C 2.675(he numeral ref\
ers historically to section 2 of the UNIX Reference Manual,)-9.175 F
.036(which at one time w)33.336 491.819 R .036
(as a printed document that came with your UNIX system.)-.13 F .037
(All system)6.537 F .83(calls are contained in section 2.)33.336 506.819
R .83(Under some UNIX systems, such as Solaris, the syntax)7.33 F -.13
(wo)33.336 521.819 S(uld be).13 E F2(man -s2)3.25 E F1(.)A .092
(It is con)33.336 542.819 R -.195(ve)-.52 G .093
(ntion that system commands are in section 1 of the manual.).195 F .093
(System calls are in)6.593 F .598(section 2.)33.336 557.819 R .597(Stan\
dard C library functions and functions in other libraries, such as the \
math)7.097 F(library)33.336 572.819 Q 3.815(,a)-.845 G .565
(re in section 3.)-3.815 F .565(These 3 sections are uni)7.065 F -.195
(ve)-.325 G .566(rsal among all UNIX v).195 F 3.816(ariants. Linux)-.325
F .224(uses section 4 for information on speci\214c hardw)33.336 587.819
R .224(are de)-.13 F 3.474(vices. Section)-.325 F 3.474(5d)3.474 G .224
(ocuments system)-3.474 F 1.543(\214le formats.)33.336 602.819 R 1.543
(Section 6 is for g)8.043 F 4.793(ames. Section)-.065 F 4.793(7d)4.793 G
1.543(ocuments netw)-4.793 F 1.543(ork protocols, ho)-.13 F 4.793(wt)
-.325 G(he)-4.793 E 3.247(system bootstraps, character sets, and ho)
33.336 617.819 R 6.496(wc)-.325 G 3.246(ertain k)-6.496 F 3.246
(ernel features w)-.13 F 6.496(orks. Section)-.13 F(8)6.496 E 4.535
(documents system maintenance and administration commands.)33.336
632.819 R -1.43(Yo)11.036 G 7.786(um)1.43 G 4.536(ay \214nd that)-7.786
F .19(sections 4 and higher are or)33.336 647.819 R -.065(ga)-.234 G .19
(nized dif).065 F .19(ferently on dif)-.325 F .19(ferent UNIX v)-.325 F
.19(ariants such as Solaris)-.325 F(or BSD.)33.336 662.819 Q/F3 13
/Times-Bold@0 SF(The UNIX I/O model)208.654 692.819 Q F1 1.731
(The set of system calls for performing I/O under UNIX is some)33.336
728.819 R 1.731(what analogous to the)-.325 F(stdio library routines. T)
33.336 743.819 Q 3.25(oo)-1.04 G(pen a \214le:)-3.25 E 0 Cg EP
%%Page: 9 9
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 1/pg 9)73.998 E(\2512016 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25
E/F1 10/Courier@0 SF(#include <fcntl.h>)33.336 117 Q
(/* Defines O_XXX constants */)66 E(int fd;)33.336 141 Q
(/* Must be signed integer */)126 E(char *fname;)33.336 153 Q 22.8
(fd=open\(fname,O_RDONLY\); /*)90.936 177 R
(Similar to fp=fopen\(fname,"r"\) */)6 E 12
(fd=open\(fname,O_WRONLY|O_CREAT|O_TRUNC,0666\); /*)90.936 189 R
(fopen\(fname,"w"\) */)6 E 92.4(fd=open\(fname,O_RDWR\); /*)90.936 201 R
(fopen\(fname,"r+"\) */)6 E 24
(fd=open\(fname,O_RDWR|O_CREAT|O_TRUNC,0666\); /*)90.936 213 R
(fopen\(fname,"w+"\) */)6 E 6
(fd=open\(fname,O_WRONLY|O_CREAT|O_APPEND,0666\); /*)90.936 225 R
(fopen\(fname,"a"\) */)6 E 18
(fd=open\(fname,O_RDWR|O_CREAT|O_APPEND,0666\); /*)90.936 237 R
(fopen\(fname,"a+"\) */)6 E/F2 13/Times-Roman@0 SF 3.354(The v)33.336
258 R 3.353(alue returned from open is kno)-.325 F 3.353(wn as a)-.325 F
/F3 13/Times-Italic@0 SF 3.353(\214le descriptor)6.603 F F2 9.853(.T)C
3.353(he \214le descriptor is)-9.853 F 1.998(essentially a "handle" or \
a "cookie" which can be used by the program in subsequent)33.336 273 R
.254(system calls to refer to the open \214le.)33.336 288 R .254
(It is a small inte)6.754 F .254(ger with a range of 0 to N, where N)
-.195 F .273(is at least 19 on e)33.336 303 R -.195(ve)-.325 G .273
(ry v).195 F .273(ariant of UNIX kno)-.325 F .273
(wn to mankind, and is frequently much lar)-.325 F(ger)-.234 E(.)-.715 E
1.726(\(E.g. on Linux systems, the maximum number of open \214les is a \
con\214gurable resource)33.336 318 R 4.375(limit. Y)33.336 333 R 1.125
(ou can observ)-1.43 F 4.375(et)-.195 G 1.125
(hese limits with the command)-4.375 F/F4 13/Courier@0 SF 1.125
(ulimit -a)4.375 F F2 7.625(.T)C 1.125(he def)-7.625 F 1.125(ault limit)
-.13 F(on \214le descriptors is 1024\))33.336 348 Q 2.256
(Once a program is done with the \214le, it can call)33.336 369 R F4
(close\(fd\))5.506 E F2 8.756(.T)C 2.256(his is analogous to)-8.756 F F4
(fclose\(fp\))33.336 384 Q F2 7.38(.A)C .88
(ll open \214les are also automatically closed when a program e)-7.38 F
4.13(xits. It)-.195 F(is)4.13 E .397(often a good idea to e)33.336 399 R
.396(xplicitly close a \214le when you are done with it, and check the \
close)-.195 F .621(for error)33.336 414 R 3.871(,b)-.52 G .621(ecause t\
here are some error conditions which can occur when writing to a \214le)
-3.871 F .358(or \214le-lik)33.336 429 R 3.608(ee)-.13 G .358
(ntity such as a netw)-3.608 F .358
(ork connection, which will not be detectable until the \214le)-.13 F
4.251(is closed.)33.336 444 R 4.251
(Once closed, the \214le descriptor number may be gi)10.751 F -.195(ve)
-.325 G 7.501(no).195 G 4.251(ut ag)-7.501 F 4.251(ain by a)-.065 F
2.925(subsequent open system call.)33.336 459 R 2.925(In f)9.425 F 2.925
(act, the lo)-.13 F 2.925(west a)-.325 F -.325(va)-.26 G 2.925
(ilable \(non-open\) \214le descriptor).325 F(number is generally gi)
33.336 474 Q -.195(ve)-.325 G 3.25(no).195 G(ut.)-3.25 E 2.092 -1.04
(We s)33.336 495 T .012(ee that the open\(2\) system call can tak)1.04 F
3.262(ee)-.13 G .012(ither 2 or 3 parameters.)-3.262 F .013
(The meaning of the)6.513 F .03(third parameter)33.336 510 R 3.28(,w)
-.52 G .03(hich sets the \214le access modes for ne)-3.28 F .029
(wly created \214les, will be e)-.325 F(xplained)-.195 E
(in a subsequent unit.)33.336 525 Q 1.618
(The second parameter to open\(2\) is an inte)33.336 546 R 1.619
(ger which is a bitwise combination of \215ags)-.195 F .358
(de\214ned as O_XXXX in the header \214le)33.336 561 R F4(<fcntl.h>)
3.608 E F2 6.858(.F)C .358(or e)-7.053 F .358
(xample, on a particular Linux)-.195 F .103
(system, these constants are de\214ned thus \(some de\214nitions ha)
33.336 576 R .493 -.195(ve b)-.26 H .103(een ommited for clarity\).).195
F F1(#define O_RDONLY)33.336 588 Q(00)78 E(#define O_WRONLY)33.336 600 Q
(01)78 E(#define O_RDWR)33.336 612 Q(02)90 E(#define O_CREAT)33.336 624
Q(0100)72 E(#define O_EXCL)33.336 636 Q(0200)78 E(#define O_TRUNC)33.336
648 Q(01000)66 E(#define O_APPEND)33.336 660 Q(02000)60 E F2 2.489 -1.04
(We s)33.336 681 T .409(ee that the bits are de\214ned as octal constan\
ts, and can be combined using the logical)1.04 F(OR operator)33.336 696
Q 6.5(.T)-.715 G(his idiom is v)-6.5 E
(ery common for UNIX system calls.)-.195 E(The)33.336 717 Q F4
(<fcntl.h>)5.438 E F2 2.188
(header \214le is one which is packaged with the operating system.)5.438
F(It)8.688 E .823(must be coordinated so that the same bit de\214nition\
s which were used to b)33.336 732 R .823(uild the k)-.26 F(ernel)-.13 E
0 Cg EP
%%Page: 10 10
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 1/pg 10)71.748 E(\2512016 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 13/Times-Roman@0 SF(are also the ones e)33.336 120 Q
(xposed to user)-.195 E(-le)-.26 E -.195(ve)-.325 G 3.25(lp).195 G
(rogrammers.)-3.25 E/F2 13/Times-Bold@0 SF(Standard I/O str)207.146 165
Q(eams)-.234 E F1 .919
(In the UNIX model, three \214le descriptors are special.)33.336 201 R
.92(Descriptors 0, 1 and 2 are kno)7.42 F(wn)-.325 E 1.196
(as standard input, standard output and standard error)33.336 216 R
4.446(,r)-.52 G(especti)-4.446 E -.195(ve)-.325 G(ly).195 E 7.696(.T)
-.845 G 1.196(he analogous stdio)-7.696 F(names are)33.336 231 Q/F3 13
/Courier@0 SF(stdin,stdout,stderr)3.25 E F1(.)A(By def)33.336 252 Q
(ault, when the program is started from a command-line shell en)-.13 E
(vironment, standard)-.52 E .15(input refers to the k)33.336 267 R -.195
(ey)-.13 G .15(board and standard output and standard error the screen.)
.195 F .15(Use of the)6.65 F 1.308(shell redirection syntax \(such as >\
 or |\) changes which \214le is associated with particular)33.336 282 R
.56(standard streams, and is one of the most basic b)33.336 297 R .56
(uilding blocks of the po)-.26 F .559(wer of the UNIX)-.325 F 1.191
(operating system.)33.336 312 R 1.191
(More will be said about the mechanisms of I/O redirection in a later)
7.691 F(unit.)33.336 327 Q .49
(The three standard streams \(0,1,2\) may be assumed to al)33.336 348 R
-.13(wa)-.13 G .49(ys be open when the program).13 F(be)33.336 363 Q
1.291(gins, and should generally not be closed by the program.)-.195 F
1.292(Doing so w)7.792 F 1.292(ould defeat the)-.13 F .044
(intentions of the in)33.336 378 R -.26(vo)-.52 G .044(king user).26 F
6.544(.H)-.715 G -.325(ow)-6.544 G -2.795 -.325(ev e).325 H 1.084 -.52
(r, w).325 H 3.294(ew).52 G .044(ill see e)-3.294 F .043
(xamples later of instances where it)-.195 F
(is necessary and proper to close and/or re-open these streams.)33.336
393 Q F2(Err)223.344 423 Q(or r)-.234 E(eporting)-.234 E F1 2.208
(When a UNIX system call f)33.336 459 R 2.208
(ails, it returns an out-of-the-ordinary v)-.13 F 2.208
(alue to indicate its)-.325 F -.13(fa)33.336 474 S .05
(ilure, and sets a).13 F F2(global)3.3 E F1 .049(\(ick ick ick\) inte)
3.3 F .049(ger v)-.195 F .049(ariable called)-.325 F F3(errno)3.299 E F1
.049(to indicate the nature)3.299 F 2.693(of the error)33.336 489 R
9.193(.A)-.715 G 5.944(st)-9.193 G 2.694(here is only one such v)-5.944
F 2.694(ariable, subsequent f)-.325 F 2.694(ailed system calls will)-.13
F -.195(ove)33.336 504 S(rwrite the error information of earlier calls.)
.195 E F2(Note:)33.336 525 Q F3(errno)3.939 E F1 .689
(is only set when a system call f)3.939 F 3.939(ails. Since)-.13 F .689
(it is a global inte)3.939 F(ger)-.195 E 3.939(,t)-.52 G .689
(he initial)-3.939 F -.325(va)33.336 540 S 2.889
(lue is 0, which is "No error).325 F 2.889
(." If a particular system call f)-.715 F 2.89(ails, it will set)-.13 F
F3(errno)6.14 E F1(.)A 3.261(Subsequent system calls that do not f)
33.336 555 R 3.261(ail will)-.13 F F2(not)6.511 E F1 -.195(ove)6.511 G
3.261(rwrite that v).195 F 6.511(alue. This)-.325 F(global)6.511 E -.325
(va)33.336 570 S 2.828
(riable model becomes a problem with multi-threaded programming, b).325
F 2.828(ut that is f)-.26 F(ar)-.13 E(be)33.336 585 Q
(yond the scope of this \214rst unit.)-.195 E F2 4.353(Ap)33.336 606 S
-.234(ro)-4.353 G 1.103(gram should always check f).234 F 1.102(or err)
-.325 F(ors.)-.234 E F1 1.102(It can attempt to tak)7.602 F 4.352(es)
-.13 G 1.102(ome action based)-4.352 F(on the speci\214c error)33.336
621 Q(code:)6.5 E/F4 10/Courier@0 SF(#include <errno.h>)33.336 633 Q
(/* Defines error numbers */)64.8 E(#include <fcntl.h>)33.336 645 Q
(/* For O_RDONLY def */)64.8 E(int fd;)33.336 669 Q(char *fname;)33.336
681 Q 6(if \(\(fd=open\(fname,O_RDONLY\)\)<0\))90.936 705 R({)90.936 717
Q(/* The code below is meant as an example of making a decision based)
39.336 729 Q(on errno.)90.936 741 Q(Don't blindly copy it */)12 E 0 Cg
EP
%%Page: 11 11
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 1/pg 11)71.748 E(\2512016 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 10/Courier@0 SF(if \(errno == ENOENT\))148.536 117 Q
(fprintf\(stderr,"Sorry, %s does not appear to be)206.136 129 Q
(the name of a valid file0,fname\);)263.736 141 Q(else)148.536 153 Q
(fprintf\(stderr,"Can't open file %s for reading:%s0,)206.136 165 Q
(fname,strerror\(errno\)\);)263.736 177 Q(return -1;)148.536 189 Q(})
90.936 201 Q/F2 13/Times-Roman@0 SF 1.337(In the abo)33.336 222 R 1.727
-.195(ve ex)-.195 H 1.337
(ample, we see the use of the symbolic constant).195 F/F3 13/Courier@0
SF(ENOENT)4.588 E F2 1.338(to refer to the)4.588 F 1.416
(speci\214c error \("No such \214le or directory"\).)33.336 237 R 3.496
-1.04(We a)7.916 H 1.416(lso see the use of the standard library)1.04 F
(function)33.336 252 Q F3(strerror)5.248 E F2 1.998
(which returns the error description.)5.248 F 1.998
(This illustrates an important)8.498 F 1.709
(point in error handling and reporting:)33.336 267 R 1.708
(Report as much information as possible!)8.208 F(Don')8.208 E(t)-.234 E
.314(hide information that might be useful in determining the reason fo\
r a problem.)33.336 282 R .314(Once that)6.814 F 2.515
(information is discarded, it is lost fore)33.336 297 R -.195(ve)-.325 G
7.195 -.715(r. A).195 H 5.765(tt).715 G 2.514(he v)-5.765 F 2.514
(ery least, for f)-.195 F 2.514(ailed system calls,)-.13 F(pro)33.336
312 Q(vide:)-.195 E(The operation that w)90.936 342 Q
(as being attempted \("open"\))-.13 E
(The object being operated on \(the \214le name\))90.936 357 Q
(Other rele)90.936 372 Q -.325(va)-.325 G
(nt parameters \("for reading"\)).325 E
(The error returned \(strerror\(errno\)\))90.936 387 Q .381(The te)
33.336 423 R .381(xtual error message which is generated by)-.195 F F3
(strerror)3.631 E F2(,)A F3(perror)3.631 E F2 .381(and the lik)3.631 F
.381(e, may)-.13 F -.325(va)33.336 438 S .725
(ry from system to system or may not e).325 F -.195(ve)-.325 G 3.974(nb)
.195 G 3.974(ei)-3.974 G 3.974(nt)-3.974 G .724
(he English language if "localization")-3.974 F .378(is turned on.)
33.336 453 R .379(The assignment of speci\214c)6.879 F F3(errno)3.629 E
F2(inte)3.629 E .379(gers to speci\214c errors is also subject)-.195 F
3.735(to change.)33.336 468 R 3.735(The symbolic error names, such as)
10.235 F F3(ENOENT)6.985 E F2 6.985(,h)C -.325(ow)-6.985 G -2.795 -.325
(ev e).325 H 4.775 -.52(r, a).325 H 3.735(re part of the).52 F .576
(standardized UNIX programming interf)33.336 483 R 3.826
(ace. Programmers)-.13 F .576(should al)3.826 F -.13(wa)-.13 G .577
(ys use these when).13 F 1.007
(making decisions based on speci\214c error results.)33.336 498 R(The)
7.506 E F3(man)4.256 E F2 1.006(pages document which error)4.256 F 4.408
(codes may be e)33.336 513 R 4.408(xpected for a gi)-.195 F -.195(ve)
-.325 G 7.658(ns).195 G 4.408(ystem call \(although be)-7.658 F -.13(wa)
-.325 G 4.408(re, sometimes the).13 F .518(documentation is not e)33.336
528 R(xhausti)-.195 E -.195(ve)-.325 G 3.768(\). The).195 F .518
(Linux k)3.768 F .518(ernel de\214nes o)-.13 F -.195(ve)-.195 G 3.768
(r1).195 G .518(00 error codes.)-3.768 F .518(As an)7.018 F -.195(ex)
33.336 543 S
(ample, the open\(2\) system call can return more than a dozen dif).195
E(ferent error codes.)-.325 E 5.014(Although the e)33.336 564 R 5.014
(xample abo)-.195 F 5.404 -.195(ve i)-.195 H 5.014
(llustrates looking at).195 F F3(errno)8.264 E F2 5.014(to mak)8.264 F
8.265(ee)-.13 G(rror)-8.265 E(-speci\214c)-.26 E .664
(decisions, generally that is not necessary)33.336 579 R 7.164(.I)-.845
G 3.914(nm)-7.164 G .664(ost cases, system calls should be check)-3.914
F(ed)-.13 E(for error and the error should be reported with)33.336 594 Q
F3(strerror)3.25 E F2 3.25(,e)C(tc.)-3.25 E/F4 13/Times-Bold@0 SF
(Reading and Writing)208.465 639 Q F2 .459(The system call pro)33.336
675 R .459(vided to read data from a \214le is called, oddly enough,)
-.195 F F3(read)3.709 E F2 6.959(.H)C .46(ere is)-6.959 F(an e)33.336
690 Q(xample:)-.195 E F1(char buf[4096];)33.336 702 Q(int j,lim;)33.336
714 Q(lim=sizeof buf;)90.936 726 Q(j=read\(fd,buf,lim\);)90.936 738 Q 0
Cg EP
%%Page: 12 12
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 1/pg 12)71.748 E(\2512016 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 13/Times-Roman@0 SF .646
(The \214rst parameter to read is an open \214le descriptor)33.336 120 R
7.146(,T)-.52 G .646(he second is a b)-7.146 F(uf)-.26 E .646
(fer \(an array of)-.325 F 1.643
(characters\) into which the data will be read.)33.336 135 R 1.643
(Sometimes the b)8.143 F(uf)-.26 E 1.643(fer is a static array)-.325 F
4.894(,a)-.845 G(s)-4.894 E(abo)33.336 150 Q -.195(ve)-.195 G 3.934(,s)
.195 G .684(ometimes the b)-3.934 F(uf)-.26 E .684
(fer has been dynamically allocated with malloc, b)-.325 F .684
(ut it better be)-.26 F .513
(something that actually has some memory associated with it!)33.336 165
R(Finally)7.014 E 3.764(,t)-.845 G .514(he third ar)-3.764 F(gument)
-.234 E .065(is a limit to the number of bytes to read into the b)33.336
180 R(uf)-.26 E(fer)-.325 E 6.565(.O)-.715 G -.195(bv)-6.565 G(iously)
.195 E 3.315(,t)-.845 G .065(he b)-3.315 F(uf)-.26 E .065
(fer should be at)-.325 F 1.313(least as lar)33.336 195 R 1.314
(ge as this limit.)-.234 F 1.314(The operating system will ne)7.814 F
-.195(ve)-.325 G 4.564(rt).195 G 1.314(ry to write more than that)-4.564
F 1.292(number of bytes into the b)33.336 210 R(uf)-.26 E(fer)-.325 E
7.792(.N)-.715 G 1.292(ote that the result is NO)-7.792 F 4.542(Tt)-.52
G 1.292(erminated by a NUL \(\\0\))-4.542 F(character)33.336 225 Q(.)
-.715 E 2.08 -1.04(We c)33.336 246 T(an classify the return v)1.04 E
(alue from read into 3 cate)-.325 E(gories:)-.195 E
(j<0: An error has occurred.)33.336 276 Q
(j==0: The end of \214le has been reached \(see discussion belo)33.336
291 Q(w\))-.325 E 3.25(0<j<=lim: j)33.336 306 R(bytes of data ha)3.25 E
.39 -.195(ve b)-.26 H(een read into the b).195 E(uf)-.26 E(fer)-.325 E
(.)-.715 E(The con)33.336 342 Q -.195(ve)-.52 G(rse of read is write:)
.195 E/F2 10/Courier@0 SF(char buf[4096];)33.336 354 Q(int n,j;)33.336
366 Q(strcpy\(buf,"test"\);)90.936 390 Q(n=strlen\(buf\);)90.936 402 Q
(j=write\(fd,buf,n\);)90.936 414 Q/F3 13/Courier@0 SF(write)33.336 435 Q
F1 1.907(attempts to write the)5.156 F F3(n)5.157 E F1 1.907
(bytes residing at the address)5.157 F F3(buf)5.157 E F1 1.907
(to the \214le)5.157 F F3(fd)5.157 E F1 8.407(.T)C(he)-8.407 E(return v)
33.336 450 Q(alue f)-.325 E(alls into 4 cate)-.13 E(gories:)-.195 E
33.29(j<0: An)33.336 480 R(error occurred.)3.25 E
(The data were not written.)6.5 E 25.958(j==0: No)33.336 495 R 1.328
(data were written.)4.579 F 1.328(This is almost al)7.828 F -.13(wa)-.13
G 1.328(ys an error and can be treated the).13 F 2.991(same as a ne)
33.336 510 R -.065(ga)-.195 G(ti).065 E 3.381 -.195(ve r)-.325 H 6.241
(esult. Under).195 F 2.991
(some circumstances, such as non-blocking I/O on)6.241 F(de)33.336 525 Q
.663(vices or netw)-.325 F .662(ork connections, this condition is a tr\
ansient one and the write can be re-)-.13 F 3.25(tried. This)33.336 540
R(is be)3.25 E(yond the scope of this introduction.)-.195 E 25.958
(j==n: All)33.336 555 R(of the data were written.)3.25 E 3.25
(0<j<n: The)33.336 570 R
(\214rst j bytes of data were written successfully)3.25 E(.)-.845 E .708
(The last case is an interesting one, and one in which man)33.336 591 R
3.959(yp)-.195 G .709(rogrammers mak)-3.959 F 3.959(em)-.13 G(istak)
-3.959 E(es.)-.13 E .009
(This so-called "short write" can happen for a v)33.336 606 R .008
(ariety of reasons, which we shall e)-.325 F .008(xplore in)-.195 F
1.182(future units.)33.336 621 R 1.182(It doesn')7.682 F 4.432(ti)-.234
G 1.182(ndicate a "hard error)-4.432 F 1.182(," b)-.52 F 1.182(ut it)
-.26 F/F4 13/Times-Italic@0 SF(does)4.432 E F1 1.183
(mean that bytes j .. n-1 were)4.432 F/F5 13/Times-Bold@0 SF(not)33.336
636 Q F1 3.855(written. If)3.855 F .605(you o)3.855 F -.195(ve)-.195 G
.604(rlook this condition and only check for write returning a ne).195 F
-.065(ga)-.195 G(ti).065 E -.195(ve)-.325 G -.325(va)33.336 651 S 1.105
(lue, you will potentially lose data.).325 F 1.105
(On the other hand, if you o)7.605 F -.195(ve)-.195 G -.26(r-).195 G
1.105(react and treat this).26 F .349
(short-write as a system call error)33.336 666 R 3.599(,y)-.52 G(ou')
-3.599 E .349(ll \214nd that there is no error)-.13 F 3.598(,a)-.52 G
.348(nd you will terminate)-3.598 F .067(your ef)33.336 681 R .067
(forts prematurely)-.325 F 6.567(.P)-.845 G .068(roper reco)-6.567 F
-.195(ve)-.195 G .068
(ry is to re-try the write for the remaining n-j bytes).195 F
(starting at b)33.336 696 Q(uf+j.)-.26 E F5 -.195(Ju)209.057 726 S
(st a b).195 E(unch of bytes)-.26 E 0 Cg EP
%%Page: 13 13
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 1/pg 13)71.748 E(\2512016 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 13/Times-Roman@0 SF .742
(The UNIX \214le model may be said to be "just a b)33.336 120 R .742
(unch of bytes".)-.26 F .741(The UNIX k)7.241 F .741(ernel does)-.13 F
2.268(not impose an)33.336 135 R 5.519(yk)-.195 G 2.269
(ind of typing or structure on \214les.)-5.519 F(Ev)8.769 E 2.269
(ery \214le is created and treated)-.195 F 1.714
(equally as an arbitrary and)33.336 150 R/F2 13/Times-Italic@0 SF
(opaque)4.964 E F1 1.714(\(meaning that UNIX doesn')B 4.964(tc)-.234 G
1.713(are what the contents)-4.964 F 1.661(are\) sequence of bytes.)
33.336 165 R 1.661
(There are no special characters; each of the 256 possible byte)8.161 F
-.325(va)33.336 180 S 2.508(lues is of equal stature.).325 F 2.508
(In particular)9.008 F 5.758(,n)-.52 G 2.508
(ote that the NUL character \()-5.758 F/F3 13/Courier@0 SF('\\0')A F1
5.758(\)h)C 2.508(as no)-5.758 F .807(special signi\214cance.)33.336 195
R .808(Although it is used by C as a string terminator)7.307 F 4.058(,i)
-.52 G 4.058(ti)-4.058 G 4.058(sn)-4.058 G .808(either needed)-4.058 F
(nor noticed by read or write.)33.336 210 Q .082
(Also, there is no EOF \(End Of File\) character!)33.336 231 R .081
(The UNIX k)6.581 F .081(ernel kno)-.13 F .081(ws where the end of)-.325
F 4.342<618c>33.336 246 S 1.092(le is because it kno)-4.342 F 1.093
(ws e)-.325 F 1.093(xactly ho)-.195 F 4.343(wm)-.325 G(an)-4.343 E 4.343
(yb)-.195 G 1.093(ytes are in the \214le.)-4.343 F 1.093(By def)7.593 F
1.093(ault, reads and)-.13 F .535(writes are sequential.)33.336 261 R
.535(The k)7.035 F .535
(ernel maintains a record for each \214le descriptor of where the)-.13 F
1.163(last read or write left of)33.336 276 R 1.163(f, and the ne)-.325
F 1.163(xt one picks up there.)-.195 F 4.413(Aw)7.663 G 1.163(rite be)
-4.413 F 1.164(yond the e)-.195 F(xisting)-.195 E 1.049
(end of \214le simply gro)33.336 291 R 1.048(ws the \214le.)-.325 F
4.298(Ar)7.548 G 1.048
(ead past end of \214le returns 0 \(after all, there are 0)-4.298 F
(bytes a)33.336 306 Q -.325(va)-.26 G(ilable to be read\).).325 E .223(\
The current read/write position in an open \214le can be queried or res\
et through the)33.336 327 R F3(lseek)3.473 E F1 .53(system call.)33.336
342 R .529
(Thus a \214le can be accessed either sequentially or randomly)7.03 F
7.029(.T)-.845 G .529(he position is)-7.029 F 3.573(0w)33.336 357 S .323
(hen the \214le is \214rst opened, although as a further wrinkle, when \
a \214le has been opened)-3.573 F 1.627(with the)33.336 372 R/F4 13
/Times-Bold@0 SF(O_APPEND)4.877 E F1 1.627
(bit \215ag, all writes include an implicit and automatic seek to the)
4.877 F 1.326(current end of \214le at the moment of the write.)33.336
387 R 1.327(This mode is often used for log \214les to)7.827 F
(ensure that data can ne)33.336 402 Q -.195(ve)-.325 G 3.25(rb).195 G
3.25(eo)-3.25 G -.195(ve)-3.445 G(rwritten.).195 E 1.539
(When reading from the terminal, as is the case by def)33.336 423 R
1.538(ault when reading from standard)-.13 F .245(input, the e)33.336
438 R -.195(ve)-.325 G .246(nt of hitting the end of \214le can be simu\
lated when the user hits Control-D at).195 F 3.244(the be)33.336 453 R
3.243(ginning of the line.)-.195 F 3.243
(This causes read to return 0 when it reaches this point.)9.743 F .88
(Subsequent reads will not continue to return 0, as w)33.336 468 R .881
(ould be the case when reading from)-.13 F .463(an actual \214le, so it\
 is possible to input multiple "\214les" from the k)33.336 483 R -.195
(ey)-.13 G 3.713(board. It).195 F .463(is important)3.713 F .341
(to note that the actual Control-D character is NO)33.336 498 R 3.591
(Tp)-.52 G .342(art of the input stream and will ne)-3.591 F -.195(ve)
-.325 G(r).195 E 3.34(be seen by the program.)33.336 513 R 3.34(The f)
9.84 F 3.34(act that Control-D is the k)-.13 F -.195(ey)-.13 G 3.34
(board end-of-\214le is an).195 F .888(arbitrary con)33.336 528 R -.195
(ve)-.52 G 4.138(ntion. An).195 F 4.138(yc)-.195 G .888
(haracter can be made the EOF character \(read the man page)-4.138 F F3
(stty\(1\))33.336 543 Q F1(\), often with amusing results.)A F4
(The stdio library)220.386 573 Q F1 1.531(The C programming language w)
33.336 609 R 1.53(as designed as the \214rst "portable" high-le)-.13 F
-.195(ve)-.325 G 4.78(ll).195 G(anguage.)-4.78 E 2.993(This w)33.336 624
R 2.993(as a great challenge considering the v)-.13 F 2.994
(ast collection of operating systems and)-.325 F .218
(machine architectures that e)33.336 639 R .218(xisted, f)-.195 F .218
(ar more than ha)-.13 F .608 -.195(ve s)-.26 H(urvi).195 E -.195(ve)
-.325 G 3.468(di).195 G .218(nto common usage in the)-3.468 F 1.349
(present day)33.336 654 R 7.849(.E)-.845 G 1.349
(ach operating system could be counted on to ha)-7.849 F 1.74 -.195
(ve i)-.26 H 1.35(ts o).195 F 1.35(wn w)-.325 F 1.35(ay of doing)-.13 F
(what is a v)33.336 669 Q(ery uni)-.195 E -.195(ve)-.325 G
(rsal function: input and output of \214les.).195 E 1.59(The Standard I\
/O library \(stdio\) is a wrapper designed to isolate the programmer fr\
om)33.336 690 R .141(these details and allo)33.336 705 R 3.391(wh)-.325
G .141(ir to write code which can be readily compiled and e)-3.391 F
-.195(xe)-.195 G .142(cuted on a).195 F 4.099(multitude of systems.)
33.336 720 R 4.099(Underneath, the wrapper mak)10.599 F 4.099
(es OS-speci\214c system calls to)-.13 F 1.135(accomplish its job)33.336
735 R 7.635(.I)-.52 G 4.385(ta)-7.635 G 1.135(lso pro)-4.385 F 1.135
(vides some "v)-.195 F 1.136
(alue-added" features such as error handling)-.325 F 0 Cg EP
%%Page: 14 14
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 1/pg 14)71.748 E(\2512016 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 13/Times-Roman@0 SF(and b)33.336 120 Q(uf)-.26 E(fering.)
-.325 E .155(Other libraries ha)33.336 141 R .544 -.195(ve b)-.26 H .154
(een layered on top of the stdio library).195 F 3.404(,m)-.845 G .154
(ost notably the)-3.404 F/F2 13/Courier@0 SF(iostream)3.404 E F1
(object library of the C++ run-time model.)33.336 156 Q 1.664
(It is assumed here that the reader is fully con)33.336 177 R -.195(ve)
-.52 G 1.664(rsant in C programming with the stdio).195 F
(library and so no e)33.336 192 Q(xplanation of matters such as)-.195 E
F2(printf)3.25 E F1(syntax will be gi)3.25 E -.195(ve)-.325 G(n.).195 E
1.795(Under UNIX, the stdio library mak)33.336 213 R 1.795
(es use of the UNIX \214le I/O system calls presented)-.13 F(belo)33.336
228 Q -.845(w.)-.325 G/F3 13/Times-Bold@0 SF
(Buffering and the stdio library)182.108 258 Q F1(Buf)33.336 294 Q 1.51
(fering is a k)-.325 F 1.9 -.195(ey c)-.13 H 1.51
(oncept in operating systems design.).195 F 1.51
(The principle is simple: gi)8.01 F -.195(ve)-.325 G(n).195 E 1.047
(that you')33.336 309 R 1.437 -.195(ve d)-.65 H 1.047
(one something, you').195 F 1.047(re lik)-.65 F 1.047
(ely to do something v)-.13 F 1.047(ery similar v)-.195 F 1.047
(ery soon.)-.195 F(One)7.547 E 2.24(of the most common uses of b)33.336
324 R(uf)-.26 E 2.24(fering is in the stdio library)-.325 F 8.741(.C)
-.845 G 2.241(onsider a program to)-8.741 F .536
(change all linefeeds to <CR><LF> \(in other w)33.336 339 R .536
(ords, con)-.13 F -.195(ve)-.52 G .536(rting from UNIX to DOS EOL).195 F
(con)33.336 354 Q -.195(ve)-.52 G(ntions\):).195 E/F4 10/Courier@0 SF
(main\(\))33.336 366 Q({)33.336 378 Q(char buf[1];)33.336 390 Q(int n;)
33.336 402 Q(while \(\(n=read\(0,buf,1\)\)>0\))90.936 414 Q({)90.936 426
Q(if \(buf[0]=='\\n'\))148.536 438 Q(write\(1,"\\r",1\);)206.136 450 Q
(write\(1,buf,1\);)148.536 462 Q(})90.936 474 Q(})33.336 486 Q F1 .473
(The equi)33.336 516 R -.325(va)-.325 G .473
(lent program using stdio runs f).325 F .473(aster: \()-.13 F F3(NO)A
3.724(TE: Both)-.52 F -.13(ve)3.724 G .474(rsions of the pr).13 F(ogram)
-.234 E(ar)33.336 531 Q 3.25(es)-.234 G
(eriously \215awed in that they fail to check f)-3.25 E(or or r)-.325 E
(eport err)-.234 E(ors !!!)-.234 E F1(\))A F4(#include <stdio.h>)33.336
558 Q(main\(\))33.336 582 Q({)33.336 594 Q(int c;)33.336 606 Q
(while \(\(c=getc\(stdin\)\)!=EOF\))90.936 618 Q({)90.936 630 Q
(if \(c=='\\n'\))148.536 642 Q(putc\('\\r',stdout\);)206.136 654 Q
(putc\(c,stdout\);)148.536 666 Q(})90.936 678 Q(})33.336 690 Q F1 1.785
(When you use the stdio functions such as putc and getc, or printf \(wh\
ich is internally)33.336 711 R -.26(bu)33.336 726 S .725(ilt on a v).26
F .726(ariant of putc\), you are not actually making a system call.)
-.325 F(The)7.226 E F2 .726(FILE *)3.976 F F1 .726(is a)3.976 F .638
(pointer to a struct which is allocated by fopen.)33.336 741 R .638
(This struct contains a pointer to a b)7.138 F(uf)-.26 E(fer)-.325 E(,)
-.52 E 0 Cg EP
%%Page: 15 15
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 1/pg 15)71.748 E(\2512016 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 13/Times-Roman@0 SF .799(which is also allocated at user)
33.336 120 R(-le)-.26 E -.195(ve)-.325 G 4.049(lb).195 G 4.049(yf)-4.049
G .8(open, and other related \214elds such as a count of)-4.049 F .683
(the characters in the b)33.336 135 R(uf)-.26 E(fer)-.325 E 7.183(.p)
-.715 G .682(utc copies the supplied single character into the ne)-7.183
F .682(xt space)-.195 F(in the b)33.336 150 Q(uf)-.26 E(fer)-.325 E 6.5
(.W)-.715 G(hen the b)-6.5 E(uf)-.26 E(fer is full, only then is the)
-.325 E/F2 13/Courier@0 SF(write)3.25 E F1(system call made.)3.25 E
(Let')33.336 171 Q 5.073(ss)-.715 G 1.823(ay the b)-5.073 F(uf)-.26 E
1.824(fer is 4,096 bytes \(a common choice\).)-.325 F(No)8.324 E 5.074
(wi)-.325 G 1.824(nstead of making 4,096)-5.074 F .961
(system calls, one character at a time, just one will be made.)33.336
186 R .961(This sa)7.461 F -.195(ve)-.26 G 4.211(st).195 G .961(he o)
-4.211 F -.195(ve)-.195 G .961(rhead of).195 F 1.482
(making a system call, which as we will see can in)33.336 201 R -.26(vo)
-.52 G(lv).26 E 4.732(eal)-.195 G 1.482(ong code path with a lot of)
-4.732 F 4.734(instructions. Of)33.336 216 R 1.484(course, if the b)
4.734 F(uf)-.26 E 1.484(fer is v)-.325 F 1.484(ery lar)-.195 F 1.484
(ge, there will be relati)-.234 F -.195(ve)-.325 G 1.483(ly little g)
.195 F 1.483(ain in)-.065 F(economy)33.336 231 Q 3.652(,a)-.845 G .402
(nd the price will be e)-3.652 F(xcessi)-.195 E .792 -.195(ve m)-.325 H
.402(emory usage.).195 F .402(The def)6.902 F .402(ault b)-.13 F(uf)-.26
E .402(fer size is tuned)-.325 F 1.229
(to the optimal performance in most cases.)33.336 246 R -.195(Fo)7.729 G
4.478(rm).195 G 1.228(ost programs, this layer of isolation is)-4.478 F
4.036(ideal. It)33.336 261 R(allo)4.036 E .786(ws the programmer to sep\
arate what he or she is trying to do from the lo)-.325 F(w-)-.325 E(le)
33.336 276 Q -.195(ve)-.325 G 5.009(li).195 G 1.759
(mplementation details.)-5.009 F 1.758
(In some cases, especially with programs that do system-)8.259 F(le)
33.336 291 Q -.195(ve)-.325 G 3.42(lt).195 G .17(hings \(lik)-3.42 F
3.42(ef)-.13 G .171(ormatting disks\) this isolation gets in the w)-3.42
F(ay)-.13 E 3.421(,a)-.845 G .171(nd it is necessary to use)-3.421 F
(the system calls directly)33.336 306 Q(.)-.845 E .057
(In the case of input, a read system call is only made when the b)33.336
327 R(uf)-.26 E .057(fer is empty)-.325 F 6.557(.T)-.845 G(hereafter)
-6.557 E(,)-.52 E .233
(functions such as getc, fgets, scanf, etc. simply cop)33.336 342 R
3.483(yt)-.13 G .233(he characters out of the b)-3.483 F(uf)-.26 E(fer)
-.325 E 3.484(,u)-.52 G(ntil)-3.484 E(it gets empty ag)33.336 357 Q
(ain.)-.065 E 1.117(Sometimes we don')33.336 378 R 4.367(tw)-.234 G
1.117(ant to w)-4.497 F 1.117(ait for an entire b)-.13 F(uf)-.26 E 1.117
(fer before reading/writing.)-.325 F 1.117(The stdio)7.617 F
(library supports 3 output b)33.336 393 Q(uf)-.26 E(fering modes:)-.325
E 5.243<835f>43.336 408 S 1.993(IONBF: Unb)-5.243 F(uf)-.26 E 5.243
(fered. Data)-.325 F 1.993(are written immediately)5.243 F 8.493(.T)
-.845 G 1.993(his is the def)-8.493 F 1.993(ault mode for)-.13 F(stderr)
69.336 423 Q(--you really w)-.26 E
(ant to see your errors as soon as the)-.13 E 3.25(yh)-.195 G(appen.)
-3.25 E 3.25<835f>43.336 438 S(IOFBF: File b)-3.25 E(uf)-.26 E 3.25
(fering. Buf)-.325 F(fer is \215ushed when it is full.)-.325 E 4.439
<835f>43.336 453 S 1.189(IOLBF: Line b)-4.439 F(uf)-.26 E 4.438
(fering. Buf)-.325 F 1.188
(fer is \215ushed when an end-of-line character is written.)-.325 F
(This is intended for terminals, and is the def)69.336 468 Q
(ault for stdin and stdout.)-.13 E 3.845<8354>33.336 483 S(he)-3.845 E
F2(setvbuf)3.845 E F1 .596(library call can be used to adjust the b)
3.845 F(uf)-.26 E .596(fering mode of a FILE, and the)-.325 F
(size of the b)33.336 498 Q(uf)-.26 E(fer)-.325 E(.)-.715 E F2(fflush)
6.5 E F1(can be used to force a b)3.25 E(uf)-.26 E(fer \215ush.)-.325 E
0 Cg EP
%%Trailer
end
%%EOF
